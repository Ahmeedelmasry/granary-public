import{I as L,r as $,c as O,z as ae,o as pe,f as v,k as m,l as y,q as a,s as i,v as n,t as p,A as ye,m as o,C as e,D as W,F as g,L as be,B as q,E as z,H as E,G as ie}from"./entry.0a484266.js";import{g as Pe}from"./granary.877d6f42.js";import{c as $e}from"./clients.42385680.js";import{p as We}from"./products.18c9b9ab.js";import{s as ke}from"./supplier.ec4415e2.js";import{p as xe}from"./units.06423e2a.js";import{t as we}from"./taxes.1d13499b.js";import{i as _e}from"./invoices.ef7fcbff.js";import{h as se}from"./moment.a9aaa855.js";import{c as u,r as k,m as ue,n as Z,b as ee,u as Te}from"./index.28147b1b.js";import{V as Ne,a as Me}from"./VSkeletonLoader.ec353db9.js";const Ue={class:"update_banner"},Ve=o("h3",{style:{"font-size":"23px","font-weight":"700"}},"بيانات اساسية",-1),De={class:"field_container"},Fe=o("label",{for:"granary"},"الصومعة",-1),Ie={class:"input_parent position-relative"},Se={key:0,class:"err_msg"},Ce={class:"field_container"},Ae=o("label",{for:"supplier"},"المورد",-1),Oe={class:"input_parent position-relative"},qe=o("div",{class:"d-flex ps-4 pe-2 py-2",style:{"justify-content":"space-between"}},[o("span",null,"الاسم"),o("span",null,"الكود")],-1),ze={key:0,class:"err_msg"},Le={class:"field_container"},Ye=o("label",{for:"documentNumber"},"رقم المستند",-1),je={class:"input_parent position-relative"},Ge={key:0,class:"err_msg"},Ke={class:"field_container"},Be=o("label",{for:"carNumber"},"رقم السيارة",-1),Ee={class:"input_parent position-relative"},Re={key:0,class:"err_msg"},Je={class:"field_container"},He=o("label",{for:"date"},"التاريخ",-1),Qe={class:"input_parent position-relative"},Xe={key:0,class:"err_msg"},Ze=o("h3",{style:{"font-size":"23px","font-weight":"700"}},"بيانات المنتج",-1),et={class:"field_container"},tt=o("label",{for:"product"},"المنتج",-1),ot={class:"input_parent position-relative"},at={key:0,class:"err_msg"},it={class:"field_container"},st=o("label",{for:"productType"},"الفرز",-1),lt={class:"input_parent position-relative"},rt={key:0,class:"err_msg"},nt={class:"field_container"},dt=o("label",{for:"carWeightWith"},"الوزن القائم",-1),ct={class:"input_parent position-relative"},ut={key:0,class:"err_msg"},pt={class:"field_container"},_t=o("label",{for:"carWeightWithOut"},"الوزن الفارغ",-1),mt={class:"input_parent position-relative"},gt={key:0,class:"err_msg"},vt={class:"field_container"},ht=o("label",{for:"typeName"},"صافي الوزن",-1),ft={class:"input_parent position-relative"},yt=["value"],bt=o("h3",{style:{"font-size":"23px","font-weight":"700"}}," بيانات التعبئة ",-1),Pt={class:"field_container"},$t=o("label",{for:"productUnit"},"وحدة التعبئة",-1),Wt={class:"input_parent position-relative"},kt={key:0,class:"err_msg"},xt={class:"field_container"},wt=o("label",{for:"totalPackingWeight"},"اجمالي وزن الوحدات",-1),Tt={class:"input_parent position-relative"},Nt={key:0,class:"err_msg"},Mt={class:"field_container"},Ut=o("label",{for:"typeName"},"الصافي بعد خصم وزن الوحدات",-1),Vt={class:"input_parent position-relative"},Dt=["value"],Ft=o("h3",{style:{"font-size":"23px","font-weight":"700"}}," بيانات الخصومات ",-1),It={class:"field_container"},St=o("label",{for:"agingPricePerTon"},"سعر التعتيق",-1),Ct={class:"input_parent position-relative"},At={key:0,class:"err_msg"},Ot={class:"field_container"},qt=o("label",{for:"totalPackingWeight"},"اجمالي التعتيق",-1),zt={class:"input_parent position-relative"},Lt=["value"],Yt={class:"field_container"},jt=o("label",{for:"totalPackingWeight"},"ضريبة دمغة",-1),Gt={class:"input_parent position-relative"},Kt=["value"],Bt={class:"field_container"},Et=o("label",{for:"totalPackingWeight"},"ضريبة مهن زراعية",-1),Rt={class:"input_parent position-relative"},Jt=["value"],Ht={class:"field_container"},Qt=o("label",{for:"totalPackingWeight"},"اجمالي الخصم",-1),Xt={class:"input_parent position-relative"},Zt=["value"],eo=o("h3",{style:{"font-size":"23px","font-weight":"700"}}," القيم النهائية ",-1),to={class:"field_container"},oo=o("label",{for:"totalPackingWeight"},"القيمة قبل الخصم",-1),ao={class:"input_parent position-relative"},io=["value"],so={class:"field_container"},lo=o("label",{for:"totalPackingWeight"},"القيمة بعد الخصم",-1),ro={class:"input_parent position-relative"},no=["value"],co={class:"field_container"},uo=o("label",{for:"totalPackingWeight"},"القيمة بعد الخصم والتعتيق",-1),po={class:"input_parent position-relative"},_o=["value"],mo={class:"actions text-center mt-7"},go={__name:"Update",props:["openPopup","toUpdate"],emits:["closePopup","regetData"],setup(M,{emit:T}){const F=M,x=Pe(),C=$e(),U=ke(),V=We(),w=xe(),P=we(),te=_e(),{granaries:oe}=L(x),{clients:I}=L(C),{suppliers:h}=L(U),{products:Y}=L(V),{productUnits:A}=L(w),{taxes:j}=L(P),s=$({granary:null,documentNumber:null,carNumber:null,supplier:null,date:se(new Date).format("YYYY-MM-DD"),product:null,productType:null,productMeasuringUnit:null,carWeightWith:null,carWeightWithOut:null,productUnit:null,totalPackingWeight:null,agingPricePerTon:null}),S=$(!1),G=$(!1),X=$({granary:{required:u.withMessage("هذا الحقل مطلوب",k)},documentNumber:{required:u.withMessage("هذا الحقل مطلوب",k),minLength:u.withMessage("يجب ادخال اكثر من 3 مدخلات",ue(3))},carNumber:{required:u.withMessage("هذا الحقل مطلوب",k),minLength:u.withMessage("يجب ادخال اكثر من 3 مدخلات",ue(3))},supplier:{required:u.withMessage("هذا الحقل مطلوب",k)},date:{required:u.withMessage("هذا الحقل مطلوب",k)},product:{required:u.withMessage("هذا الحقل مطلوب",k)},productType:{required:u.withMessage("هذا الحقل مطلوب",k)},carWeightWith:{required:u.withMessage("هذا الحقل مطلوب",k),numeric:u.withMessage("هذا الحقل يقبل ارقام فقط",Z),between:u.withMessage("يجب ان يكون الرقم اكبر من 0",ee(1,1e7))},carWeightWithOut:{required:u.withMessage("هذا الحقل مطلوب",k),numeric:u.withMessage("هذا الحقل يقبل ارقام فقط",Z),between:u.withMessage("يجب ان يكون الرقم اكبر من 0",ee(1,1e7))},productUnit:{required:u.withMessage("هذا الحقل مطلوب",k)},totalPackingWeight:{required:u.withMessage("هذا الحقل مطلوب",k),numeric:u.withMessage("هذا الحقل يقبل ارقام فقط",Z),between:u.withMessage("يجب ان يكون الرقم اكبر من 0",ee(1,1e7))},agingPricePerTon:{required:u.withMessage("هذا الحقل مطلوب",k),numeric:u.withMessage("هذا الحقل يقبل ارقام فقط",Z),between:u.withMessage("يجب ان يكون الرقم اكبر من او يساوي 0",ee(0,1e7))}}),c=O(()=>s.value.product?s.value.product.typePriceList:[]),K=O(()=>Number(s.value.carWeightWith)&&Number(s.value.carWeightWithOut)?parseFloat(s.value.carWeightWith)-parseFloat(s.value.carWeightWithOut):0),b=O(()=>K.value>0&&Number(s.value.totalPackingWeight)?parseFloat(K.value)-parseFloat(s.value.totalPackingWeight):0),R=O(()=>Number(s.value.agingPricePerTon)&&Number(b.value)?Math.ceil(parseFloat(b.value)/1e3*parseFloat(s.value.agingPricePerTon)):0),B=O(()=>{const f={docTax:0,agroTax:0};return j.value.content&&j.value.content.length&&(f.docTax=j.value.content.find(r=>r.name=="ضريبة دمغة"),f.agroTax=j.value.content.find(r=>r.name=="مهن زراعية")),f}),le=O(()=>{if(Number(b.value)){const f=Number(b.value)/s.value.productType.weightPerArdab;return Math.ceil(f)}return 0}),D=O(()=>{if(Number(b.value)){const f=le.value*B.value.agroTax.value;return(B.value.docTax.value+f).toFixed(2)}return 0});ae(()=>S.value,f=>{f||setTimeout(()=>{T("closePopup")},200)});let l=Te(X,s);const me=async()=>{if(await l.value.$validate()){G.value=!0;const r={granary:{id:s.value.granary.id},supplier:{id:s.value.supplier.id},documentNumber:s.value.documentNumber,carNumber:s.value.carNumber,product:{id:s.value.product.id},productType:{id:s.value.productType.productType.id},productPricePerKilo:parseFloat(s.value.productType.pricePerKilo),carWeightWith:parseFloat(s.value.carWeightWith),carWeightWithOut:parseFloat(s.value.carWeightWithOut),totalWeightFromCar:K.value,packageUnit:{id:s.value.productUnit.id},totalPackingWeight:parseFloat(s.value.totalPackingWeight),totalClearWeight:b.value,agingPricePerTon:parseFloat(s.value.agingPricePerTon),totalAgingPrice:R.value,formPrice:B.value.docTax.value,pricePerArdab:B.value.agroTax.value,totalArdab:le.value,totalPrice:(b.value*parseFloat(s.value.productType.pricePerKilo)).toFixed(2),totalDiscount:parseFloat(D.value).toFixed(2),totalDiscountWithAging:parseFloat(D.value+R.value).toFixed(2),totalAfterDiscount:parseFloat(b.value*parseFloat(s.value.productType.pricePerKilo)-D.value).toFixed(2),totalAfterDiscountWithAging:parseFloat(b.value*parseFloat(s.value.productType.pricePerKilo)-D.value-R.value).toFixed(2),date:se(new Date(s.value.date)).format("DD-MM-YYYY")};await te.doAddInvoice(r)&&(localStorage.setItem("selectedItems",JSON.stringify({granary:s.value.granary,product:s.value.product,date:s.value.date,unit:s.value.productUnit})),T("regetData"),l.value.$reset(),s.value.documentNumber=null,s.value.carNumber=null,s.value.supplier=null,s.value.productMeasuringUnit=null,s.value.carWeightWith=null,s.value.carWeightWithOut=null,s.value.totalPackingWeight=null,s.value.agingPricePerTon=null),G.value=!1}};return pe(()=>{if(C.doGetClients(0,1e4),x.doGetGranaries(0,1e4),U.doGetSuppliers(0,1e4),V.doGetProducts(0,1e4),w.doGetProductUnits(0,1e4),P.doGetTaxes(0,1e4),localStorage.getItem("selectedItems")){const f=JSON.parse(localStorage.getItem("selectedItems"));s.value.granary=f.granary,s.value.product=f.product,s.value.date=f.date,s.value.productUnit=f.unit}S.value=F.openPopup}),(f,r)=>{const re=v("v-card-title"),N=v("v-divider"),d=v("v-col"),J=v("v-autocomplete"),_=v("v-icon"),ne=v("v-list-item"),H=v("v-row"),ge=v("v-container"),de=v("v-btn"),ve=v("v-form"),he=v("v-card"),fe=v("v-dialog");return m(),y("div",Ue,[a(fe,{modelValue:e(S),"onUpdate:modelValue":r[14]||(r[14]=t=>ie(S)?S.value=t:null),fullscreen:!0},{default:i(()=>[a(he,{style:{"border-radius":"unset !important"}},{default:i(()=>[a(re,{class:"mb-0 text-center bg-grey-lighten-3 main_title font-safe-bold",style:{"font-size":"22px"}},{default:i(()=>[n(p(M.toUpdate?"تعديل فاتورة توريد":"اضافة فاتورة توريد"),1)]),_:1}),a(ve,{class:"pa-5",onSubmit:ye(me,["prevent"])},{default:i(()=>[a(ge,{fluid:""},{default:i(()=>[a(H,{dir:"rtl"},{default:i(()=>[a(d,{cols:"12"},{default:i(()=>[Ve,a(N),a(N)]),_:1}),a(d,{cols:"12",sm:"6",md:"3",lg:""},{default:i(()=>[o("div",De,[Fe,o("div",Ie,[a(J,{"return-object":"",items:e(oe).content,"item-title":"name","item-value":"id",variant:"outlined",placeholder:"اختر الصومعة",id:"granary",modelValue:e(s).granary,"onUpdate:modelValue":r[0]||(r[0]=t=>e(s).granary=t),"hide-details":"",class:W([e(l).$errors.find(t=>t.$property=="granary")?"err_field":""])},null,8,["items","modelValue","class"]),a(_,{class:"position-absolute"},{default:i(()=>[n("mdi-store-24-hour")]),_:1})])]),e(l).$errors.find(t=>t.$property=="granary")?(m(),y("span",Se,p(e(l).$errors.find(t=>t.$property=="granary").$message),1)):g("",!0)]),_:1}),a(d,{cols:"12",sm:"6",md:"3",lg:""},{default:i(()=>[o("div",Ce,[Ae,o("div",Oe,[a(J,{"return-object":"",items:e(h).content,"item-value":"id","item-title":"name",variant:"outlined",placeholder:"اختر المورد",name:"supplier",id:"supplier",modelValue:e(s).supplier,"onUpdate:modelValue":r[1]||(r[1]=t=>e(s).supplier=t),"hide-details":"","custom-filter":(t,Q,ce)=>ce.title.toString().includes(Q)||ce.value.id.toString().includes(Q),class:W([e(l).$errors.find(t=>t.$property=="supplier")?"err_field":""])},{"prepend-item":i(()=>[qe]),item:i(({props:t,item:Q})=>[o("div",be(t,{class:"d-flex select_slot",style:{"justify-content":"space-between"}}),[a(ne,null,{default:i(()=>[n(p(Q.raw.name),1)]),_:2},1024),a(ne,null,{default:i(()=>[n(p(Q.raw.id),1)]),_:2},1024)],16)]),_:1},8,["items","modelValue","custom-filter","class"]),a(_,{class:"position-absolute"},{default:i(()=>[n("mdi-account-cowboy-hat ")]),_:1})])]),e(l).$errors.find(t=>t.$property=="supplier")?(m(),y("span",ze,p(e(l).$errors.find(t=>t.$property=="supplier").$message),1)):g("",!0)]),_:1}),a(d,{cols:"12",sm:"6",md:"3",lg:""},{default:i(()=>[o("div",Le,[Ye,o("div",je,[q(o("input",{type:"text",placeholder:"رقم المستند",name:"documentNumber",id:"documentNumber","onUpdate:modelValue":r[2]||(r[2]=t=>e(s).documentNumber=t),class:W(e(l).$errors.find(t=>t.$property=="documentNumber")?"err_field":"")},null,2),[[z,e(s).documentNumber]]),a(_,{class:"position-absolute"},{default:i(()=>[n("mdi-file ")]),_:1})])]),e(l).$errors.find(t=>t.$property=="documentNumber")?(m(),y("span",Ge,p(e(l).$errors.find(t=>t.$property=="documentNumber").$message),1)):g("",!0)]),_:1}),a(d,{cols:"12",sm:"6",md:"3",lg:""},{default:i(()=>[o("div",Ke,[Be,o("div",Ee,[q(o("input",{type:"text",placeholder:"رقم السيارة",name:"carNumber",id:"carNumber","onUpdate:modelValue":r[3]||(r[3]=t=>e(s).carNumber=t),class:W(e(l).$errors.find(t=>t.$property=="carNumber")?"err_field":"")},null,2),[[z,e(s).carNumber]]),a(_,{class:"position-absolute"},{default:i(()=>[n("mdi-car ")]),_:1})])]),e(l).$errors.find(t=>t.$property=="carNumber")?(m(),y("span",Re,p(e(l).$errors.find(t=>t.$property=="carNumber").$message),1)):g("",!0)]),_:1}),e(I).content?(m(),E(d,{key:0,cols:"12",sm:"6",md:"3",lg:""},{default:i(()=>[o("div",Je,[He,o("div",Qe,[q(o("input",{type:"date",name:"date",id:"date","onUpdate:modelValue":r[4]||(r[4]=t=>e(s).date=t),class:W(e(l).$errors.find(t=>t.$property=="date")?"err_field":""),style:{"padding-right":"0 !important"}},null,2),[[z,e(s).date]]),a(_,{class:"position-absolute"},{default:i(()=>[n("mdi-calendar")]),_:1})])]),e(l).$errors.find(t=>t.$property=="date")?(m(),y("span",Xe,p(e(l).$errors.find(t=>t.$property=="date").$message),1)):g("",!0)]),_:1})):g("",!0)]),_:1}),a(H,{dir:"rtl",class:"mt-5"},{default:i(()=>[a(d,{cols:"12"},{default:i(()=>[Ze,a(N),a(N)]),_:1}),a(d,{cols:"12",sm:"6",md:"3",lg:""},{default:i(()=>[o("div",et,[tt,o("div",ot,[a(J,{"return-object":"",items:e(Y).content,"item-title":"name","item-value":"id",name:"product",id:"product",modelValue:e(s).product,"onUpdate:modelValue":[r[5]||(r[5]=t=>e(s).product=t),r[6]||(r[6]=t=>(e(s).productType=null,e(s).productMeasuringUnit=null))],variant:"outlined",placeholder:"اختر المنتج","hide-details":"",class:W([e(l).$errors.find(t=>t.$property=="product")?"err_field":""])},null,8,["items","modelValue","class"]),a(_,{class:"position-absolute"},{default:i(()=>[n("mdi-basket")]),_:1})])]),e(l).$errors.find(t=>t.$property=="product")?(m(),y("span",at,p(e(l).$errors.find(t=>t.$property=="product").$message),1)):g("",!0)]),_:1}),a(d,{cols:"12",sm:"6",md:"3",lg:""},{default:i(()=>[o("div",it,[st,o("div",lt,[a(J,{"return-object":"",items:e(c),"item-title":"productType.name","item-value":"id",variant:"outlined",placeholder:"اختر الفرز",name:"productType",id:"productType","no-data-text":"لايوجد بيانات",modelValue:e(s).productType,"onUpdate:modelValue":r[7]||(r[7]=t=>e(s).productType=t),"hide-details":"",class:W([e(l).$errors.find(t=>t.$property=="productType")?"err_field":""])},null,8,["items","modelValue","class"]),a(_,{class:"position-absolute"},{default:i(()=>[n("mdi-sitemap ")]),_:1})])]),e(l).$errors.find(t=>t.$property=="productType")?(m(),y("span",rt,p(e(l).$errors.find(t=>t.$property=="productType").$message),1)):g("",!0)]),_:1}),a(d,{cols:"12",sm:"6",md:"3",lg:""},{default:i(()=>[o("div",nt,[dt,o("div",ct,[q(o("input",{type:"text",placeholder:"الوزن القائم",name:"carWeightWith","onUpdate:modelValue":r[8]||(r[8]=t=>e(s).carWeightWith=t),id:"carWeightWith",class:W(e(l).$errors.find(t=>t.$property=="carWeightWith")?"err_field":"")},null,2),[[z,e(s).carWeightWith]]),a(_,{class:"position-absolute"},{default:i(()=>[n("mdi-weight-kilogram ")]),_:1})])]),e(l).$errors.find(t=>t.$property=="carWeightWith")?(m(),y("span",ut,p(e(l).$errors.find(t=>t.$property=="carWeightWith").$message),1)):g("",!0)]),_:1}),e(I).content?(m(),E(d,{key:0,cols:"12",sm:"6",md:"3",lg:""},{default:i(()=>[o("div",pt,[_t,o("div",mt,[q(o("input",{type:"text",placeholder:"الوزن الفارغ",name:"carWeightWithOut","onUpdate:modelValue":r[9]||(r[9]=t=>e(s).carWeightWithOut=t),id:"carWeightWithOut",class:W(e(l).$errors.find(t=>t.$property=="carWeightWithOut")?"err_field":"")},null,2),[[z,e(s).carWeightWithOut]]),a(_,{class:"position-absolute"},{default:i(()=>[n("mdi-weight-kilogram ")]),_:1})])]),e(l).$errors.find(t=>t.$property=="carWeightWithOut")?(m(),y("span",gt,p(e(l).$errors.find(t=>t.$property=="carWeightWithOut").$message),1)):g("",!0)]),_:1})):g("",!0),e(I).content?(m(),E(d,{key:1,cols:"12",sm:"6",md:"3",lg:""},{default:i(()=>[o("div",vt,[ht,o("div",ft,[o("input",{type:"text",placeholder:"صافي الوزن",name:"typeName",id:"typeName",disabled:"",value:e(K)},null,8,yt),a(_,{class:"position-absolute"},{default:i(()=>[n("mdi-weight-kilogram ")]),_:1})])])]),_:1})):g("",!0)]),_:1}),a(H,{dir:"rtl",class:"mt-5"},{default:i(()=>[a(d,{cols:"12"},{default:i(()=>[bt,a(N),a(N)]),_:1}),a(d,{cols:"12",sm:"6",md:"3",lg:""},{default:i(()=>[o("div",Pt,[$t,o("div",Wt,[a(J,{"item-title":"name","item-value":"id","return-object":"",items:e(A).content,name:"productUnit",id:"productUnit",modelValue:e(s).productUnit,"onUpdate:modelValue":r[10]||(r[10]=t=>e(s).productUnit=t),variant:"outlined",placeholder:"اختر وحدة التعبئة","hide-details":"",disabled:!e(A).content||!e(A).content.length,class:W([e(l).$errors.find(t=>t.$property=="productUnit")?"err_field":""])},null,8,["items","modelValue","disabled","class"]),a(_,{class:"position-absolute"},{default:i(()=>[n("mdi-basket-fill ")]),_:1})])]),e(l).$errors.find(t=>t.$property=="productUnit")?(m(),y("span",kt,p(e(l).$errors.find(t=>t.$property=="productUnit").$message),1)):g("",!0)]),_:1}),a(d,{cols:"12",sm:"6",md:"3",lg:""},{default:i(()=>[o("div",xt,[wt,o("div",Tt,[q(o("input",{type:"text",placeholder:"وزن وحدات التعبئة بالكيلو",name:"totalPackingWeight",id:"totalPackingWeight","onUpdate:modelValue":r[11]||(r[11]=t=>e(s).totalPackingWeight=t),class:W(e(l).$errors.find(t=>t.$property=="totalPackingWeight")?"err_field":"")},null,2),[[z,e(s).totalPackingWeight]]),a(_,{class:"position-absolute"},{default:i(()=>[n("mdi-weight-kilogram ")]),_:1})])]),e(l).$errors.find(t=>t.$property=="totalPackingWeight")?(m(),y("span",Nt,p(e(l).$errors.find(t=>t.$property=="totalPackingWeight").$message),1)):g("",!0)]),_:1}),a(d,{cols:"12",sm:"6",md:"3",lg:""},{default:i(()=>[o("div",Mt,[Ut,o("div",Vt,[o("input",{type:"text",placeholder:"الصافي بعد خصم وزن الوحدات",name:"typeName",id:"typeName",value:e(b),disabled:""},null,8,Dt),a(_,{class:"position-absolute"},{default:i(()=>[n("mdi-weight-kilogram ")]),_:1})])])]),_:1}),a(d,{cols:"12",sm:"6",md:"3",lg:""}),a(d,{cols:"12",sm:"6",md:"3",lg:""})]),_:1}),a(H,{dir:"rtl",class:"mt-5"},{default:i(()=>[a(d,{cols:"12"},{default:i(()=>[Ft,a(N),a(N)]),_:1}),a(d,{cols:"12",sm:"6",md:"3",lg:""},{default:i(()=>[o("div",It,[St,o("div",Ct,[q(o("input",{type:"text",placeholder:"سعر التعتيق",name:"agingPricePerTon",id:"agingPricePerTon","onUpdate:modelValue":r[12]||(r[12]=t=>e(s).agingPricePerTon=t),class:W(e(l).$errors.find(t=>t.$property=="agingPricePerTon")?"err_field":"")},null,2),[[z,e(s).agingPricePerTon]]),a(_,{class:"position-absolute"},{default:i(()=>[n("mdi-currency-usd ")]),_:1})])]),e(l).$errors.find(t=>t.$property=="agingPricePerTon")?(m(),y("span",At,p(e(l).$errors.find(t=>t.$property=="agingPricePerTon").$message),1)):g("",!0)]),_:1}),a(d,{cols:"12",sm:"6",md:"3",lg:""},{default:i(()=>[o("div",Ot,[qt,o("div",zt,[o("input",{type:"text",placeholder:"اجمالي التعتيق",name:"totalPackingWeight",id:"totalPackingWeight",value:e(R),disabled:""},null,8,Lt),a(_,{class:"position-absolute"},{default:i(()=>[n("mdi-currency-usd ")]),_:1})])])]),_:1}),a(d,{cols:"12",sm:"6",md:"3",lg:""},{default:i(()=>[o("div",Yt,[jt,o("div",Gt,[o("input",{type:"text",placeholder:"ضريبة دمغة",name:"totalPackingWeight",id:"totalPackingWeight",value:e(B).docTax.value,disabled:""},null,8,Kt),a(_,{class:"position-absolute"},{default:i(()=>[n("mdi-currency-usd ")]),_:1})])])]),_:1}),a(d,{cols:"12",sm:"6",md:"3",lg:""},{default:i(()=>[o("div",Bt,[Et,o("div",Rt,[o("input",{type:"text",placeholder:"مهن زراعية",name:"totalPackingWeight",id:"totalPackingWeight",value:e(B).agroTax.value,disabled:""},null,8,Jt),a(_,{class:"position-absolute"},{default:i(()=>[n("mdi-currency-usd ")]),_:1})])])]),_:1}),a(d,{cols:"12",sm:"6",md:"3",lg:""},{default:i(()=>[o("div",Ht,[Qt,o("div",Xt,[o("input",{type:"text",placeholder:"اجمالي الخصم",name:"totalPackingWeight",id:"totalPackingWeight",disabled:"",value:e(D)},null,8,Zt),a(_,{class:"position-absolute"},{default:i(()=>[n("mdi-currency-usd ")]),_:1})])])]),_:1})]),_:1}),a(H,{dir:"rtl",class:"mt-5"},{default:i(()=>[a(d,{cols:"12"},{default:i(()=>[eo,a(N),a(N)]),_:1}),a(d,{cols:"12",sm:"6",md:"3",lg:""},{default:i(()=>[o("div",to,[oo,o("div",ao,[o("input",{type:"text",placeholder:"القيمة قبل الخصم",name:"totalPackingWeight",id:"totalPackingWeight",value:e(b)&&e(s).productType.pricePerKilo?(e(b)*e(s).productType.pricePerKilo).toFixed(2):0,disabled:""},null,8,io),a(_,{class:"position-absolute"},{default:i(()=>[n("mdi-currency-usd ")]),_:1})])])]),_:1}),a(d,{cols:"12",sm:"6",md:"3",lg:""},{default:i(()=>[o("div",so,[lo,o("div",ro,[o("input",{type:"text",placeholder:"القيمة بعد الخصم",name:"totalPackingWeight",id:"totalPackingWeight",disabled:"",value:e(D)?(e(b)*e(s).productType.pricePerKilo-e(D)).toFixed(2):0},null,8,no),a(_,{class:"position-absolute"},{default:i(()=>[n("mdi-currency-usd ")]),_:1})])])]),_:1}),a(d,{cols:"12",sm:"6",md:"3",lg:""},{default:i(()=>[o("div",co,[uo,o("div",po,[o("input",{type:"text",placeholder:"القيمة بعد الخصم والتعتيق",name:"totalPackingWeight",id:"totalPackingWeight",disabled:"",value:e(D)?parseInt(e(b)*e(s).productType.pricePerKilo-e(D)-e(R)):0},null,8,_o),a(_,{class:"position-absolute"},{default:i(()=>[n("mdi-currency-usd ")]),_:1})])])]),_:1}),a(d,{cols:"12",sm:"6",md:"3",lg:""}),a(d,{cols:"12",sm:"6",md:"3",lg:""}),a(d,{cols:"12",sm:"6",md:"3",lg:""})]),_:1})]),_:1}),o("div",mo,[a(de,{color:"red",class:"mr-3",onClick:r[13]||(r[13]=t=>S.value=!1),disabled:e(G),width:"200",height:"50",rounded:"",elevation:"0"},{default:i(()=>[n("الغاء")]),_:1},8,["disabled"]),a(de,{color:"green",width:"200",height:"50",rounded:"",elevation:"0",type:"submit",loading:e(G)},{default:i(()=>[n("حفظ")]),_:1},8,["loading"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"])])}}},vo=go;const ho={class:"dashboard_invoices_listing"},fo={class:"page_toolbar d-flex align-center justify-space-between"},yo={class:"toolbar_btns"},bo=o("div",null,"لايوجد بيانات",-1),Po={__name:"Listing",props:["invoices","loading"],emits:["regetItems"],setup(M,{emit:T}){const F=$(!1),x=$(!1),C=$(!1),U=$(null),V=$(null),w=$(1),P=$(10),te=$([{title:"رقم",key:"index",width:"0px"},{title:"التاريخ",key:"invoiceDate"},{title:"الصومعة",key:"granary.name"},{title:"المورد",key:"supplier.name"},{title:"المستند",key:"documentNumber"},{title:"رقم السيارة",key:"carNumber"},{title:"منتج / فرز",key:"productDetails"},{title:"قبل الخصم",key:"totalInvoicePrice"},{title:"بعد الخصم",key:"totalInvoicePriceAfterDiscount"}]),oe=[{title:"الرئيسية",disabled:!1,to:{name:"index"}},{title:"فواتير التوريد",disabled:!0}];return ae(()=>w.value,I=>{T("regetItems",{page:I,limit:P.value})}),ae(()=>P.value,I=>{T("regetItems",{page:w.value,limit:I})}),(I,h)=>{const Y=v("v-icon"),A=v("v-btn"),j=v("v-breadcrumbs"),s=v("v-col"),S=v("v-row"),G=v("v-container"),X=vo;return m(),y("div",ho,[o("div",fo,[o("div",yo,[a(A,{onClick:h[0]||(h[0]=c=>F.value=!0),width:"20",size:"sm",elevation:"0",color:"transparent"},{default:i(()=>[a(Y,{color:"white",size:"25"},{default:i(()=>[n("mdi-plus-circle")]),_:1})]),_:1}),a(A,{width:"20",size:"sm",elevation:"0",color:"transparent",class:"ms-3"},{default:i(()=>[a(Y,{color:"white",size:"25"},{default:i(()=>[n("mdi-printer")]),_:1})]),_:1})]),a(j,{items:oe,dir:"rtl",class:"pa-0 mb"},{title:i(({item:c})=>[n(p(c.title.toUpperCase()),1)]),_:1})]),a(G,{class:"page_container",fluid:""},{default:i(()=>[M.invoices?(m(),E(S,{key:0,class:"px-4"},{default:i(()=>[a(s,{cols:"12",class:"section_container dashboard_table pa-0"},{default:i(()=>[a(e(Ne),{headers:e(te),items:M.invoices.content,loading:M.loading,"items-per-page":e(P),"onUpdate:itemsPerPage":h[1]||(h[1]=c=>ie(P)?P.value=c:null),page:e(w),"onUpdate:page":h[2]||(h[2]=c=>ie(w)?w.value=c:null),"items-length":M.invoices.totalElements?M.invoices.totalElements:0,"no-data-text":"لايوجد بيانات","show-current-page":"",id:"invoices_table"},{"item.index":i(({item:c})=>[n(p(c.index+1),1)]),loading:i(()=>[a(e(Me),{type:"table-row@4"})]),"item.invoiceDate":i(({item:c})=>[n(p(e(se)(c.selectable.date).format("DD/MM/YYYY")),1)]),"item.productDetails":i(({item:c})=>[n(p(c.selectable.product.name)+" / "+p(c.selectable.productType.name),1)]),"item.totalInvoicePrice":i(({item:c})=>[n(p(c.selectable.totalPrice.toLocaleString()),1)]),"item.totalInvoicePriceAfterDiscount":i(({item:c})=>[n(p(c.selectable.totalAfterDiscount.toLocaleString()),1)]),"item.actions":i(({item:c})=>[a(Y,{color:"blue",style:{cursor:"pointer"},onClick:K=>(U.value=c,x.value=!0)},{default:i(()=>[n("mdi-square-edit-outline")]),_:2},1032,["onClick"]),a(A,{elevation:"0",color:"transparent",loading:c.selectable.loading,ripple:!1},{default:i(()=>[a(Y,{color:"red",style:{cursor:"pointer"},class:"ml-2",size:"23",onClick:K=>(V.value=c.selectable,C.value=!0)},{default:i(()=>[n("mdi-lock")]),_:2},1032,["onClick"])]),_:2},1032,["loading"])]),"no-data":i(()=>[bo]),_:1},8,["headers","items","loading","items-per-page","page","items-length"])]),_:1})]),_:1})):g("",!0)]),_:1}),e(x)?(m(),E(X,{key:0,openPopup:e(x),onClosePopup:h[3]||(h[3]=c=>(x.value=!1,U.value=null)),toUpdate:e(U),onRegetData:h[4]||(h[4]=c=>(w.value=1,T("regetItems",{page:1,limit:e(P)})))},null,8,["openPopup","toUpdate"])):g("",!0),e(F)?(m(),E(X,{key:1,openPopup:e(F),onClosePopup:h[5]||(h[5]=c=>F.value=!1),onRegetData:h[6]||(h[6]=c=>T("regetItems",{page:1,limit:e(P)}))},null,8,["openPopup"])):g("",!0)])}}},$o=Po,Wo={class:"dashboard_tests_page mb-10"},So={__name:"index",setup(M){const T=_e(),{invoices:F}=L(T),x=$(!0),C=async(U,V)=>{x.value=!0,await T.doGetInvoices(U-1,V),x.value=!1};return pe(()=>{C(1,10)}),(U,V)=>{const w=$o;return m(),y("div",Wo,[a(w,{invoices:e(F),loading:e(x),onRegetItems:V[0]||(V[0]=P=>C(P.page,P.limit))},null,8,["invoices","loading"])])}}};export{So as default};
