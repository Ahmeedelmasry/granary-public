import{J as k,r as I,c as j,o as A,f as v,k as x,l as M,q as a,s as n,m as t,C as o,v as D,B as $,E as w,z as C,H as W,I as N,t as i,G as P,F as z}from"./entry.9ac21750.js";import{g as G}from"./granary.552dc71b.js";import{p as R}from"./products.a76212ab.js";import{h as F}from"./moment.a9aaa855.js";import{V as B,a as E}from"./VSkeletonLoader.f41b8ad8.js";import{i as L}from"./invoices.989a2bdd.js";import{s as q}from"./supplier.33ca5a1d.js";const H={class:"supplierPaymentReportFilter"},J={class:"field_container"},O=t("label",{for:"granaryId"},"اختر الصومعة",-1),K={class:"input_parent position-relative"},Q={class:"field_container"},X=t("label",{for:"productId"},"المنتج",-1),Z={class:"input_parent position-relative"},tt={class:"field_container"},et=t("label",{for:"productTypeId"},"الفرز",-1),ot={class:"input_parent position-relative"},lt={class:"field_container"},at=t("label",{for:"creationFromDate"},"من",-1),nt={class:"input_parent position-relative"},st=["disabled"],it={class:"field_container"},dt=t("label",{for:"creationToDate"},"الي",-1),rt={class:"input_parent position-relative"},ct=["disabled"],ut={__name:"Filter",props:["loading"],emits:["filterData"],setup(r,{emit:h}){const g=G(),_=R(),{granaries:f}=k(g),{products:T}=k(_),e=I({granaryId:null,creationFromDate:null,creationToDate:null,FromDate:null,productId:null,productTypeId:null,ToDate:null}),y=j(()=>e.value.productId?e.value.productId.typePriceList:[]),b=()=>{const d={granaryId:e.value.granaryId,productId:e.value.productId?e.value.productId.id:null,productTypeId:e.value.productTypeId?e.value.productTypeId.id:null,creationFromDate:e.value.creationFromDate?F(e.value.creationFromDate).format("DD/MM/YYYY"):null,creationToDate:e.value.creationToDate?F(Date.now(e.value.creationToDate)+864e5).format("DD/MM/YYYY"):null,FromDate:e.value.FromDate?F(e.value.FromDate).format("DD/MM/YYYY"):null,ToDate:e.value.ToDate?F(e.value.ToDate).format("DD/MM/YYYY"):null};h("filterData",d)};return A(()=>{g.doGetGranaries(0,1e4),_.doGetProducts(0,1e4)}),(d,l)=>{const u=v("v-autocomplete"),p=v("v-icon"),c=v("v-col"),V=v("v-btn"),Y=v("v-row");return x(),M("div",H,[a(Y,{dir:"rtl",class:"pt-0"},{default:n(()=>[a(c,{cols:"12",sm:"6",md:"4",lg:"3",class:"py-0"},{default:n(()=>[t("div",J,[O,t("div",K,[a(u,{"item-title":"name","item-value":"id",items:o(f).content,transition:"slide-y-transition",variant:"outlined",disabled:r.loading,"hide-details":"",modelValue:o(e).granaryId,"onUpdate:modelValue":l[0]||(l[0]=m=>o(e).granaryId=m),placeholder:"اختر الصومعة"},null,8,["items","disabled","modelValue"]),a(p,{class:"position-absolute"},{default:n(()=>[D("mdi-store-24-hour")]),_:1})])])]),_:1}),a(c,{cols:"12",sm:"6",md:"4",lg:"3",class:"py-0"},{default:n(()=>[t("div",Q,[X,t("div",Z,[a(u,{"return-object":"",items:o(T).content,"item-title":"name","item-value":"id",name:"productId",id:"productId",modelValue:o(e).productId,"onUpdate:modelValue":[l[1]||(l[1]=m=>o(e).productId=m),l[2]||(l[2]=m=>o(e).productTypeId=null)],variant:"outlined",placeholder:"اختر المنتج","hide-details":""},null,8,["items","modelValue"]),a(p,{class:"position-absolute"},{default:n(()=>[D("mdi-basket")]),_:1})])])]),_:1}),a(c,{cols:"12",sm:"6",md:"4",lg:"3",class:"py-0"},{default:n(()=>[t("div",tt,[et,t("div",ot,[a(u,{"return-object":"",items:o(y),"item-title":"productType.name","item-value":"id",variant:"outlined",name:"productTypeId",id:"productTypeId","no-data-text":"لايوجد بيانات",modelValue:o(e).productTypeId,"onUpdate:modelValue":l[3]||(l[3]=m=>o(e).productTypeId=m),"hide-details":"",placeholder:"اختر الفرز"},null,8,["items","modelValue"]),a(p,{class:"position-absolute"},{default:n(()=>[D("mdi-sitemap ")]),_:1})])])]),_:1}),a(c,{cols:"12",sm:"6",md:"4",lg:"3",class:"py-0"},{default:n(()=>[t("div",lt,[at,t("div",nt,[$(t("input",{type:"date",name:"creationFromDate",disabled:r.loading,id:"creationFromDate","onUpdate:modelValue":l[4]||(l[4]=m=>o(e).creationFromDate=m),style:{"padding-right":"0 !important"}},null,8,st),[[w,o(e).creationFromDate]]),a(p,{class:"position-absolute"},{default:n(()=>[D("mdi-calendar")]),_:1})])])]),_:1}),a(c,{cols:"12",sm:"6",md:"4",lg:"3",class:"py-0"},{default:n(()=>[t("div",it,[dt,t("div",rt,[$(t("input",{type:"date",name:"creationToDate",id:"creationToDate",disabled:r.loading,"onUpdate:modelValue":l[5]||(l[5]=m=>o(e).creationToDate=m),style:{"padding-right":"0 !important"}},null,8,ct),[[w,o(e).creationToDate]]),a(p,{class:"position-absolute"},{default:n(()=>[D("mdi-calendar")]),_:1})])])]),_:1}),a(c,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-1",style:{display:"flex","align-items":"flex-end"}},{default:n(()=>[a(V,{color:"blue",width:"100",height:"40",elevation:"0",onClick:b,class:"font-weight-bold",disabled:r.loading},{default:n(()=>[D("بحث")]),_:1},8,["disabled"])]),_:1})]),_:1})])}}},pt=ut;const mt={class:"dashboard_banners_listing"},_t={class:"page_toolbar d-flex align-center justify-space-between"},vt={class:"toolbar_btns"},gt=t("h1",{dir:"rtl",class:"my-2 hide_till_print"},"تقرير فواتير التوريد",-1),ft=t("tr",null,[t("th",null,"رقم"),t("th",null,"التاريخ"),t("th",null,"الصومعه"),t("th",null,"المورد"),t("th",null,"المستند"),t("th",null,"رقم السيارة"),t("th",null,"منتج / فرز"),t("th",null,"الكمية"),t("th",null,"قبل الخصم"),t("th",null,"قيمة الخصم"),t("th",null,"بعد الخصم")],-1),bt={key:0},ht=t("td",{colspan:"7",style:{"font-size":"14px"}},"الاجمالي",-1),Dt={colspan:"1",style:{"font-size":"14px"}},yt={colspan:"1",style:{"font-size":"14px"}},It={style:{"font-size":"14px"}},xt={style:{"font-size":"14px"}},Tt=t("div",{class:"d-none"},null,-1),Ft=t("div",null,"لايوجد بيانات",-1),kt={__name:"Invoices",props:["invoices","loading","suppliers","granaries"],emits:["regetItems","filterData"],setup(r,{emit:h}){const g=r,_=I(1),f=I(1e4),T=I([{title:"رقم",key:"index"},{title:"التاريخ",key:"invoiceDate"},{title:"الصومعة",key:"granary.name"},{title:"المورد",key:"supplier.name"},{title:"المستند",key:"documentNumber"},{title:"رقم السيارة",key:"carNumber"},{title:"منتج / فرز",key:"productDetails"},{title:"بعد الخصم",key:"totalInvoicePriceAfterDiscount"},{title:"قبل الخصم",key:"totalInvoicePrice"},{title:"قيمة الخصم",key:"totalDiscountWithAging"},{title:"بعد الخصم والتعتيق",key:"totalAfterDiscountWithAging"}]),e=[{title:"الرئيسية",disabled:!1,to:{name:"index"}},{title:"التقارير",to:{name:"reports"}},{title:"يوميات العملاء",disabled:!0}],y=I({id:"printable",popTitle:" -",extraCss:"https://cdn.bootcdn.net/ajax/libs/animate.css/4.1.1/animate.compat.css, https://cdn.bootcdn.net/ajax/libs/hover.css/2.3.1/css/hover-min.css",extraHead:'<meta http-equiv="Content-Language"content="zh-cn"/>'});C(()=>_.value,d=>{h("regetItems",{page:d,limit:f.value})}),C(()=>f.value,d=>{h("regetItems",{page:_.value,limit:d})});const b=j(()=>{const d={clearWeight:0,beforeDisc:0,disc:0,afterDisc:0};if(g.invoices&&g.invoices.content&&g.invoices.content.length)return g.invoices.content.forEach(l=>{d.clearWeight+=l.totalClearWeight,d.beforeDisc+=l.totalPrice,d.disc+=l.totalDiscount,d.afterDisc+=l.totalAfterDiscount}),d});return(d,l)=>{const u=v("v-icon"),p=v("v-btn"),c=v("v-breadcrumbs"),V=pt,Y=v("v-col"),m=v("v-row"),U=v("v-container"),S=W("print");return x(),M("div",mt,[t("div",_t,[t("div",vt,[$((x(),N(p,{width:"20",size:"sm",elevation:"0",color:"transparent"},{default:n(()=>[a(u,{color:"white",size:"25"},{default:n(()=>[D("mdi-printer")]),_:1})]),_:1})),[[S,o(y)]])]),a(c,{items:e,dir:"rtl",class:"pa-0 mb"},{title:n(({item:s})=>[D(i(s.title.toUpperCase()),1)]),_:1})]),a(U,{class:"page_container",fluid:""},{default:n(()=>[r.invoices?(x(),N(m,{key:0,class:"px-4 mt-1"},{default:n(()=>[a(Y,{cols:"12",class:"px-0"},{default:n(()=>[a(V,{class:"mb-7",loading:r.loading,onFilterData:l[0]||(l[0]=s=>h("filterData",s))},null,8,["loading"])]),_:1}),a(Y,{cols:"12",class:"section_container dashboard_table pa-0",id:"printable"},{default:n(()=>[gt,a(o(B),{headers:o(T),items:r.invoices.content,loading:r.loading,"items-per-page":o(f),"onUpdate:itemsPerPage":l[1]||(l[1]=s=>P(f)?f.value=s:null),page:o(_),"onUpdate:page":l[2]||(l[2]=s=>P(_)?_.value=s:null),"items-length":r.invoices.totalElements?r.invoices.totalElements:0,"no-data-text":"لايوجد بيانات","show-current-page":"",id:"invoices_report_table"},{headers:n(()=>[ft]),item:n(({item:s})=>[t("tr",null,[t("td",null,i(s.index+1),1),t("td",null,i(o(F)(s.selectable.date).format("DD/MM/YYYY")),1),t("td",null,i(s.selectable.granary.name),1),t("td",null,i(s.selectable.supplier.name),1),t("td",null,i(s.selectable.documentNumber),1),t("td",null,i(s.selectable.carNumber),1),t("td",null,i(s.selectable.product.name)+" / "+i(s.selectable.productType.name),1),t("td",null,i(s.selectable.totalClearWeight.toFixed(2)),1),t("td",null,i(s.selectable.totalPrice.toFixed(2)),1),t("td",null,i(s.selectable.totalDiscount.toFixed(2)),1),t("td",null,i(s.selectable.totalAfterDiscount.toFixed(2)),1)]),s.index+1==r.invoices.content.length?(x(),M("tr",bt,[ht,t("td",Dt,i(o(b).clearWeight.toFixed(2)),1),t("td",yt,i(o(b).beforeDisc.toFixed(2)),1),t("td",It,i(o(b).disc.toFixed(2)),1),t("td",xt,i(o(b).afterDisc.toFixed(2)),1)])):z("",!0)]),bottom:n(()=>[Tt]),loading:n(()=>[a(o(E),{type:"table-row@4"})]),"no-data":n(()=>[Ft]),_:1},8,["headers","items","loading","items-per-page","page","items-length"])]),_:1})]),_:1})):z("",!0)]),_:1})])}}},Yt=kt,Mt={class:"dashboard_tests_page mb-10"},jt={__name:"index",setup(r){const h=L(),g=q(),_=G(),{invoices:f}=k(h),{granaries:T}=k(_),{suppliers:e}=k(g),y=I(!1),b=I({supplierId:null,granaryId:null,creationFromDate:null,creationToDate:null,FromDate:null,ToDate:null}),d=async(l,u,p)=>{y.value=!0,b.value=p||{supplierId:null,granaryId:null,creationFromDate:null,creationToDate:null,FromDate:null,ToDate:null},await h.doGetInvoices(l-1,u,b.value),y.value=!1};return A(()=>{f.value=[],g.doGetSuppliers(0,1e4),_.doGetGranaries(0,1e4)}),(l,u)=>{const p=Yt;return x(),M("div",Mt,[a(p,{invoices:o(f),loading:o(y),granaries:o(T).content,suppliers:o(e).content,onRegetItems:u[0]||(u[0]=c=>d(c.page,c.limit)),onFilterData:u[1]||(u[1]=c=>d(1,1e3,c))},null,8,["invoices","loading","granaries","suppliers"])])}}};export{jt as default};
