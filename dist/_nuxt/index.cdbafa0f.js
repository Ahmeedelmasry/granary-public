import{r as c,z as T,o as B,f as i,k as h,l as D,q as n,s as e,v as x,t as V,A as H,m as s,B as L,C as t,D as F,E as J,F as C,G as U,H as O,I as z,J as K}from"./entry.9ac21750.js";import{c as R}from"./clients.efb1b936.js";import{c as Q,r as W,u as q}from"./index.7c7e0372.js";import{V as X,a as Y}from"./VSkeletonLoader.f41b8ad8.js";const Z={class:"update_banner"},ee={class:"field_container"},te=s("label",{for:"typeName"},"اسم العميل",-1),ne={class:"input_parent position-relative"},oe={key:0,class:"err_msg"},le={class:"actions text-center mt-5"},ae={__name:"Update",props:["openPopup","toUpdate"],emits:["closePopup","regetData"],setup(p,{emit:v}){const u=p,f=R(),m=c({name:null}),d=c(!1),g=c(!1),r=c({name:{required:Q.withMessage("هذا الحقل مطلوب",W)}});T(()=>d.value,w=>{w||setTimeout(()=>{v("closePopup")},200)});let o=q(r,m);const I=async()=>{u.toUpdate&&(r.value.image={},o=q(r,m)),await o.value.$validate()&&(g.value=!0,u.toUpdate?await f.doUpdateClient({id:u.toUpdate.selectable.id,name:m.value.name})&&(v("regetData"),d.value=!1):await f.doAddClient({name:m.value.name})&&(v("regetData"),d.value=!1),g.value=!1)};return B(()=>{d.value=u.openPopup,u.toUpdate&&(m.value.name=u.toUpdate.selectable.name)}),(w,b)=>{const y=i("v-card-title"),l=i("v-icon"),$=i("v-col"),k=i("v-row"),M=i("v-container"),P=i("v-btn"),N=i("v-form"),E=i("v-card"),S=i("v-dialog");return h(),D("div",Z,[n(S,{modelValue:t(d),"onUpdate:modelValue":b[2]||(b[2]=_=>U(d)?d.value=_:null),width:"400",persistent:""},{default:e(()=>[n(E,null,{default:e(()=>[n(y,{class:"mb-0 text-center bg-grey-lighten-3 main_title font-safe-bold",style:{"font-size":"22px"}},{default:e(()=>[x(V(p.toUpdate?"تعديل عميل":"اضافة عميل جديد"),1)]),_:1}),n(N,{class:"pa-5",onSubmit:H(I,["prevent"])},{default:e(()=>[n(M,null,{default:e(()=>[n(k,{dir:"rtl"},{default:e(()=>[n($,{cols:"12"},{default:e(()=>[s("div",ee,[te,s("div",ne,[L(s("input",{type:"text","onUpdate:modelValue":b[0]||(b[0]=_=>t(m).name=_),placeholder:"اسم العميل",name:"typeName",id:"typeName",class:F(t(o).$errors.find(_=>_.$property=="name")?"err_field":"")},null,2),[[J,t(m).name]]),n(l,{class:"position-absolute"},{default:e(()=>[x("mdi-rename-outline")]),_:1})])]),t(o).$errors.find(_=>_.$property=="name")?(h(),D("span",oe,V(t(o).$errors.find(_=>_.$property=="name").$message),1)):C("",!0)]),_:1})]),_:1})]),_:1}),s("div",le,[n(P,{color:"red",class:"mr-3",onClick:b[1]||(b[1]=_=>d.value=!1),disabled:t(g)},{default:e(()=>[x("الغاء")]),_:1},8,["disabled"]),n(P,{color:"green",type:"submit",loading:t(g)},{default:e(()=>[x("حفظ")]),_:1},8,["loading"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"])])}}},se=ae,ie={class:"dashboard_banners_listing"},de={class:"page_toolbar d-flex align-center justify-space-between"},re={class:"toolbar_btns"},ce=s("h1",{dir:"rtl",class:"my-2 hide_till_print"},"العملاء",-1),ue=s("tr",null,[s("th",null,"رقم"),s("th",null,"اسم العميل"),s("th",{class:"hide_on_print"},"اجراء")],-1),pe={class:"hide_on_print"},me=s("div",null,"لايوجد بيانات",-1),_e=s("span",{class:"d-none"},null,-1),ve={key:0,class:"text-center pt-2 d-flex justify-space-between hide_on_print",style:{width:"60%"}},fe={class:"ps-5 d-flex align-center"},ge=s("label",{for:"",class:"mb-2 d-block text-end ms-3 mt-1",style:{"font-size":"12px"}},"النتائج لكل صفحة",-1),be={__name:"Listing",props:["clients","loading"],emits:["regetItems"],setup(p,{emit:v}){const u=c(!1),f=c(!1),m=c(!1),d=c(null),g=c(null),r=c(1),o=c(10),I=c([{title:"رقم",key:"index"},{title:"اسم العميل",key:"name"},{title:"اجراء",key:"actions"}]),w=[{title:"الرئيسية",disabled:!1,to:{name:"index"}},{title:"العملاء",disabled:!0}],b=c({id:"printable",popTitle:" -",extraCss:"https://cdn.bootcdn.net/ajax/libs/animate.css/4.1.1/animate.compat.css, https://cdn.bootcdn.net/ajax/libs/hover.css/2.3.1/css/hover-min.css",extraHead:'<meta http-equiv="Content-Language"content="zh-cn"/>'});return T(()=>r.value,y=>{v("regetItems",{page:y,limit:o.value})}),T(()=>o.value,y=>{v("regetItems",{page:r.value,limit:y})}),(y,l)=>{const $=i("v-icon"),k=i("v-btn"),M=i("v-breadcrumbs"),P=i("v-select"),N=i("v-pagination"),E=i("v-col"),S=i("v-row"),_=i("v-container"),j=se,A=O("print");return h(),D("div",ie,[s("div",de,[s("div",re,[n(k,{onClick:l[0]||(l[0]=a=>u.value=!0),width:"20",size:"sm",elevation:"0",color:"transparent"},{default:e(()=>[n($,{color:"white",size:"25"},{default:e(()=>[x("mdi-plus-circle")]),_:1})]),_:1}),L((h(),z(k,{width:"20",size:"sm",elevation:"0",color:"transparent",class:"ms-3"},{default:e(()=>[n($,{color:"white",size:"25"},{default:e(()=>[x("mdi-printer")]),_:1})]),_:1})),[[A,t(b)]])]),n(M,{items:w,dir:"rtl",class:"pa-0 mb"},{title:e(({item:a})=>[x(V(a.title.toUpperCase()),1)]),_:1})]),n(_,{class:"page_container",fluid:""},{default:e(()=>[p.clients?(h(),z(S,{key:0,class:"px-4"},{default:e(()=>[n(E,{cols:"12",class:"section_container dashboard_table pa-0",id:"printable"},{default:e(()=>[ce,n(t(X),{headers:t(I),items:p.clients.content,loading:p.loading,"items-per-page":t(o),"onUpdate:itemsPerPage":l[1]||(l[1]=a=>U(o)?o.value=a:null),page:t(r),"onUpdate:page":l[2]||(l[2]=a=>U(r)?r.value=a:null),"items-length":p.clients.totalElements?p.clients.totalElements:0,"no-data-text":"لايوجد بيانات","show-current-page":""},{headers:e(()=>[ue]),loading:e(()=>[n(t(Y),{type:"table-row@6"})]),item:e(({item:a})=>[s("tr",null,[s("td",null,V(a.index+1),1),s("td",null,V(a.selectable.name),1),s("td",pe,[n($,{color:"blue",style:{cursor:"pointer"},onClick:G=>(d.value=a,f.value=!0)},{default:e(()=>[x("mdi-square-edit-outline")]),_:2},1032,["onClick"]),n(k,{elevation:"0",color:"transparent",loading:a.selectable.loading,ripple:!1},{default:e(()=>[n($,{color:"red",style:{cursor:"pointer"},class:"ml-2",size:"23",onClick:G=>(g.value=a.selectable,m.value=!0)},{default:e(()=>[x("mdi-lock")]),_:2},1032,["onClick"])]),_:2},1032,["loading"])])])]),"no-data":e(()=>[me]),bottom:e(()=>[_e]),_:1},8,["headers","items","loading","items-per-page","page","items-length"]),p.loading?C("",!0):(h(),D("div",ve,[s("div",fe,[n(P,{modelValue:t(o),"onUpdate:modelValue":l[3]||(l[3]=a=>U(o)?o.value=a:null),items:[10,50,100,500],variant:"outlined","hide-details":""},null,8,["modelValue"]),ge]),n(N,{modelValue:t(r),"onUpdate:modelValue":l[4]||(l[4]=a=>U(r)?r.value=a:null),length:p.clients.totalElements?Math.ceil(p.clients.totalElements/t(o)):1},null,8,["modelValue","length"])]))]),_:1})]),_:1})):C("",!0)]),_:1}),t(f)?(h(),z(j,{key:0,openPopup:t(f),onClosePopup:l[5]||(l[5]=a=>(f.value=!1,d.value=null)),toUpdate:t(d),onRegetData:l[6]||(l[6]=a=>(r.value=1,v("regetItems",{page:1,limit:t(o)})))},null,8,["openPopup","toUpdate"])):C("",!0),t(u)?(h(),z(j,{key:1,openPopup:t(u),onClosePopup:l[7]||(l[7]=a=>u.value=!1),onRegetData:l[8]||(l[8]=a=>v("regetItems",{page:1,limit:t(o)}))},null,8,["openPopup"])):C("",!0)])}}},he=be,xe={class:"dashboard_tests_page mb-10"},Ce={__name:"index",setup(p){const v=R(),{clients:u}=K(v),f=c(!0),m=async(d,g)=>{f.value=!0,await v.doGetClients(d-1,g),f.value=!1};return B(()=>{m(1,10)}),(d,g)=>{const r=he;return h(),D("div",xe,[n(r,{clients:t(u),loading:t(f),onRegetItems:g[0]||(g[0]=o=>m(o.page,o.limit))},null,8,["clients","loading"])])}}};export{Ce as default};
