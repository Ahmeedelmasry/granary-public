import{r as _,z as E,o as H,f as u,k as x,l as k,q as a,s as t,v as h,t as y,A as K,m as n,B as S,C as e,D as B,E as R,F as U,G as D,H as Q,I as z,J as W}from"./entry.9ac21750.js";import{t as F}from"./taxes.0edbe050.js";import{c as M,r as A,n as X,b as Y,u as G}from"./index.7c7e0372.js";import{V as Z,a as ee}from"./VSkeletonLoader.f41b8ad8.js";const te={class:"update_banner"},ae={class:"field_container"},ne=n("label",{for:"typeName"},"اسم الضريبة",-1),oe={class:"input_parent position-relative"},se=["disabled"],le={key:0,class:"err_msg"},ie={class:"field_container"},de=n("label",{for:"typeName"},"قيمة الضريبة",-1),re={class:"input_parent position-relative"},ue={key:0,class:"err_msg"},ce={class:"actions text-center"},pe={__name:"Update",props:["openPopup","toUpdate"],emits:["closePopup","regetData"],setup(d,{emit:f}){const m=d,g=F(),r=_({name:null,amount:null}),c=_(!1),b=_(!1),p=_({name:{required:M.withMessage("هذا الحقل مطلوب",A)},amount:{required:M.withMessage("هذا الحقل مطلوب",A),numeric:M.withMessage("هذا الحقل يقبل ارقام فقط",X),between:M.withMessage("هذا الحقل يجب ان تكون قيمته بين 0 و 1000000",Y(0,1e6))}});E(()=>c.value,V=>{V||setTimeout(()=>{f("closePopup")},200)});let o=G(p,r);const N=async()=>{m.toUpdate&&(p.value.image={},o=G(p,r)),await o.value.$validate()&&(b.value=!0,m.toUpdate?await g.doUpdateTax({id:m.toUpdate.selectable.id,name:r.value.name,value:r.value.amount,isLocked:!1})&&(f("regetData"),c.value=!1):await g.doAddTax({name:r.value.name,value:r.value.amount,isLocked:!1})&&(f("regetData"),c.value=!1),b.value=!1)};return H(()=>{c.value=m.openPopup,m.toUpdate&&(r.value.name=m.toUpdate.selectable.name,r.value.amount=m.toUpdate.selectable.value)}),(V,v)=>{const w=u("v-card-title"),s=u("v-icon"),$=u("v-col"),C=u("v-row"),T=u("v-container"),P=u("v-btn"),I=u("v-form"),L=u("v-card"),q=u("v-dialog");return x(),k("div",te,[a(q,{modelValue:e(c),"onUpdate:modelValue":v[3]||(v[3]=i=>D(c)?c.value=i:null),width:"800",persistent:""},{default:t(()=>[a(L,null,{default:t(()=>[a(w,{class:"mb-0 text-center bg-grey-lighten-3 main_title font-weight-bold",style:{"font-size":"22px"}},{default:t(()=>[h(y(d.toUpdate?"تعديل نوع ضريبي":"اضافة نوع ضريبي"),1)]),_:1}),a(I,{class:"pa-5",onSubmit:K(N,["prevent"])},{default:t(()=>[a(T,null,{default:t(()=>[a(C,{dir:"rtl"},{default:t(()=>[a($,{cols:"6"},{default:t(()=>[n("div",ae,[ne,n("div",oe,[S(n("input",{type:"text","onUpdate:modelValue":v[0]||(v[0]=i=>e(r).name=i),placeholder:"اسم الضريبة",name:"typeName",disabled:d.toUpdate&&d.toUpdate.selectable&&d.toUpdate.selectable.name&&(d.toUpdate.selectable.name=="ضريبة دمغة"||d.toUpdate.selectable.name=="مهن زراعية"),id:"typeName",class:B(e(o).$errors.find(i=>i.$property=="name")?"err_field":"")},null,10,se),[[R,e(r).name]]),a(s,{class:"position-absolute"},{default:t(()=>[h("mdi-rename-outline")]),_:1})])]),e(o).$errors.find(i=>i.$property=="name")?(x(),k("span",le,y(e(o).$errors.find(i=>i.$property=="name").$message),1)):U("",!0)]),_:1}),a($,{cols:"6"},{default:t(()=>[n("div",ie,[de,n("div",re,[S(n("input",{type:"text","onUpdate:modelValue":v[1]||(v[1]=i=>e(r).amount=i),placeholder:"قيمة الضريبة",name:"amountNum",id:"amountNum",class:B(e(o).$errors.find(i=>i.$property=="amount")?"err_field":"")},null,2),[[R,e(r).amount]]),a(s,{class:"position-absolute"},{default:t(()=>[h("mdi-currency-usd")]),_:1})])]),e(o).$errors.find(i=>i.$property=="amount")?(x(),k("span",ue,y(e(o).$errors.find(i=>i.$property=="amount").$message),1)):U("",!0)]),_:1})]),_:1})]),_:1}),n("div",ce,[a(P,{color:"red",class:"mr-3",onClick:v[2]||(v[2]=i=>c.value=!1),disabled:e(b)},{default:t(()=>[h("الغاء")]),_:1},8,["disabled"]),a(P,{color:"green",type:"submit",loading:e(b)},{default:t(()=>[h("حفظ")]),_:1},8,["loading"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"])])}}},me=pe,_e={class:"dashboard_banners_listing"},ve={class:"page_toolbar d-flex align-center justify-space-between"},fe={class:"toolbar_btns"},ge=n("h1",{dir:"rtl",class:"my-2 hide_till_print"},"انواع الضرايب",-1),be=n("tr",null,[n("th",null,"رقم"),n("th",null,"اسم الضريبة"),n("th",null,"قيمة الضريبة"),n("th",{class:"hide_on_print"},"اجراء")],-1),xe={class:"hide_on_print"},he=n("div",null,"لايوجد بيانات",-1),$e=n("span",{class:"d-none"},null,-1),ye={key:0,class:"text-center pt-2 d-flex justify-space-between hide_on_print",style:{width:"60%"}},we={class:"ps-5 d-flex align-center"},Ue=n("label",{for:"",class:"mb-2 d-block text-end ms-3 mt-1",style:{"font-size":"12px"}},"النتائج لكل صفحة",-1),ke={__name:"Listing",props:["taxes","loading"],emits:["regetItems"],setup(d,{emit:f}){const m=_(!1),g=_(!1),r=_(!1),c=_(null),b=_(null),p=_(1),o=_(10),N=[{title:"الرئيسية",disabled:!1,to:{name:"index"}},{title:"انواع الضرايب",disabled:!0}],V=_([{title:"رقم",key:"index"},{title:"اسم الضريبة",key:"name"},{title:"قيمة الضريبة",key:"value"},{title:"اجراء",key:"actions"}]),v=_({id:"printable",popTitle:" -",extraCss:"https://cdn.bootcdn.net/ajax/libs/animate.css/4.1.1/animate.compat.css, https://cdn.bootcdn.net/ajax/libs/hover.css/2.3.1/css/hover-min.css",extraHead:'<meta http-equiv="Content-Language"content="zh-cn"/>'});return E(()=>p.value,w=>{f("regetItems",{page:w,limit:o.value})}),E(()=>o.value,w=>{f("regetItems",{page:p.value,limit:w})}),(w,s)=>{const $=u("v-icon"),C=u("v-btn"),T=u("v-breadcrumbs"),P=u("v-select"),I=u("v-pagination"),L=u("v-col"),q=u("v-row"),i=u("v-container"),j=me,J=Q("print");return x(),k("div",_e,[n("div",ve,[n("div",fe,[a(C,{onClick:s[0]||(s[0]=l=>m.value=!0),width:"20",size:"sm",elevation:"0",color:"transparent"},{default:t(()=>[a($,{color:"white",size:"25"},{default:t(()=>[h("mdi-plus-circle")]),_:1})]),_:1}),S((x(),z(C,{width:"20",size:"sm",elevation:"0",color:"transparent",class:"ms-3"},{default:t(()=>[a($,{color:"white",size:"25"},{default:t(()=>[h("mdi-printer")]),_:1})]),_:1})),[[J,e(v)]])]),a(T,{items:N,dir:"rtl",class:"pa-0 mb"},{title:t(({item:l})=>[h(y(l.title.toUpperCase()),1)]),_:1})]),a(i,{class:"page_container",fluid:""},{default:t(()=>[d.taxes?(x(),z(q,{key:0,class:"px-4"},{default:t(()=>[a(L,{cols:"12",class:"section_container dashboard_table",id:"printable"},{default:t(()=>[ge,a(e(Z),{headers:e(V),items:d.taxes.content,loading:d.loading,"items-per-page":e(o),"onUpdate:itemsPerPage":s[1]||(s[1]=l=>D(o)?o.value=l:null),page:e(p),"onUpdate:page":s[2]||(s[2]=l=>D(p)?p.value=l:null),"items-length":d.taxes.totalElements?d.taxes.totalElements:0,"no-data-text":"لايوجد بيانات","show-current-page":""},{loading:t(()=>[a(e(ee),{type:"table-row@6"})]),headers:t(()=>[be]),item:t(({item:l})=>[n("tr",null,[n("td",null,y(l.index+1),1),n("td",null,y(l.selectable.name),1),n("td",null,y(l.selectable.value),1),n("td",xe,[a($,{color:"blue",style:{cursor:"pointer"},onClick:O=>(c.value=l,g.value=!0)},{default:t(()=>[h("mdi-square-edit-outline")]),_:2},1032,["onClick"]),a(C,{elevation:"0",color:"transparent",loading:l.selectable.loading,ripple:!1},{default:t(()=>[a($,{color:"red",style:{cursor:"pointer"},class:"ml-2",size:"23",onClick:O=>(b.value=l.selectable,r.value=!0)},{default:t(()=>[h("mdi-lock")]),_:2},1032,["onClick"])]),_:2},1032,["loading"])])])]),"no-data":t(()=>[he]),bottom:t(()=>[$e]),_:1},8,["headers","items","loading","items-per-page","page","items-length"]),d.loading?U("",!0):(x(),k("div",ye,[n("div",we,[a(P,{modelValue:e(o),"onUpdate:modelValue":s[3]||(s[3]=l=>D(o)?o.value=l:null),items:[10,50,100,500],variant:"outlined","hide-details":""},null,8,["modelValue"]),Ue]),a(I,{modelValue:e(p),"onUpdate:modelValue":s[4]||(s[4]=l=>D(p)?p.value=l:null),length:d.taxes.totalElements?Math.ceil(d.taxes.totalElements/e(o)):1},null,8,["modelValue","length"])]))]),_:1})]),_:1})):U("",!0)]),_:1}),e(g)?(x(),z(j,{key:0,openPopup:e(g),onClosePopup:s[5]||(s[5]=l=>(g.value=!1,c.value=null)),toUpdate:e(c),onRegetData:s[6]||(s[6]=l=>(p.value=1,f("regetItems",{page:1,limit:e(o)})))},null,8,["openPopup","toUpdate"])):U("",!0),e(m)?(x(),z(j,{key:1,openPopup:e(m),onClosePopup:s[7]||(s[7]=l=>m.value=!1),onRegetData:s[8]||(s[8]=l=>f("regetItems",{page:1,limit:e(o)}))},null,8,["openPopup"])):U("",!0)])}}},Ve=ke,Ce={class:"dashboard_tests_page mb-10"},Ne={__name:"index",setup(d){const f=F(),{taxes:m}=W(f),g=_(!0),r=async(c,b)=>{g.value=!0,await f.doGetTaxes(c-1,b),g.value=!1};return H(()=>{r(1,10)}),(c,b)=>{const p=Ve;return x(),k("div",Ce,[a(p,{taxes:e(m),loading:e(g),onRegetItems:b[0]||(b[0]=o=>r(o.page,o.limit))},null,8,["taxes","loading"])])}}};export{Ne as default};
