import{I as F,r as w,c as L,o as C,f as p,k as M,l as k,q as o,s as t,m as a,C as l,L as E,v as d,t as f,B as S,E as $,z as G,H as z,G as U,F as A}from"./entry.0a484266.js";import{g as N}from"./granary.877d6f42.js";import{s as R}from"./supplier.ec4415e2.js";import{p as q}from"./products.18c9b9ab.js";import{h as Y}from"./moment.a9aaa855.js";import{V as H,a as J}from"./VSkeletonLoader.ec353db9.js";import{i as K}from"./invoices.ef7fcbff.js";const O={class:"supplierPaymentReportFilter"},Q={class:"field_container"},W=a("label",{for:"supplierId"},"اختر المورد",-1),X={class:"input_parent position-relative"},Z=a("div",{class:"d-flex ps-4 pe-2 py-2",style:{"justify-content":"space-between"}},[a("span",null,"الاسم"),a("span",null,"الكود")],-1),ee={class:"field_container"},te=a("label",{for:"granaryId"},"اختر الصومعة",-1),oe={class:"input_parent position-relative"},ae={class:"field_container"},le=a("label",{for:"productId"},"المنتج",-1),ne={class:"input_parent position-relative"},se={class:"field_container"},ie=a("label",{for:"productTypeId"},"الفرز",-1),de={class:"input_parent position-relative"},re={class:"field_container"},ce=a("label",{for:"creationFromDate"},"من",-1),ue={class:"input_parent position-relative"},pe=["disabled"],me={class:"field_container"},_e=a("label",{for:"creationToDate"},"الي",-1),ve={class:"input_parent position-relative"},fe=["disabled"],ge={__name:"Filter",props:["loading"],emits:["filterData"],setup(r,{emit:g}){const m=N(),_=R(),D=q(),{granaries:x}=F(m),{suppliers:b}=F(_),{products:u}=F(D),e=w({supplierId:null,granaryId:null,creationFromDate:null,creationToDate:null,FromDate:null,productId:null,productTypeId:null,ToDate:null}),I=L(()=>e.value.productId?e.value.productId.typePriceList:[]),h=()=>{const c={supplierId:e.value.supplierId,granaryId:e.value.granaryId,productId:e.value.productId?e.value.productId.id:null,productTypeId:e.value.productTypeId?e.value.productTypeId.id:null,creationFromDate:e.value.creationFromDate?Y(e.value.creationFromDate).format("DD/MM/YYYY"):null,creationToDate:e.value.creationToDate?Y(Date.now(e.value.creationToDate)+864e5).format("DD/MM/YYYY"):null,FromDate:e.value.FromDate?Y(e.value.FromDate).format("DD/MM/YYYY"):null,ToDate:e.value.ToDate?Y(e.value.ToDate).format("DD/MM/YYYY"):null};g("filterData",c)};return C(()=>{m.doGetGranaries(0,1e4),D.doGetProducts(0,1e4),_.doGetSuppliers(0,1e4)}),(c,s)=>{const v=p("v-list-item"),T=p("v-autocomplete"),n=p("v-icon"),y=p("v-col"),j=p("v-btn"),B=p("v-row");return M(),k("div",O,[o(B,{dir:"rtl",class:"pt-0"},{default:t(()=>[o(y,{cols:"12",sm:"6",md:"4",lg:"3",class:"pt-0"},{default:t(()=>[a("div",Q,[W,a("div",X,[o(T,{"item-title":"name","item-value":"id",items:l(b).content,transition:"slide-y-transition",variant:"outlined","hide-details":"",modelValue:l(e).supplierId,"onUpdate:modelValue":[s[0]||(s[0]=i=>l(e).supplierId=i),s[1]||(s[1]=i=>c.supplierFound?c.supplierFound=!1:!1)],disabled:r.loading,placeholder:"اختر المورد",name:"supplier",id:"supplier","custom-filter":(i,V,P)=>P.title.toString().includes(V)||P.value.toString().includes(V)},{"prepend-item":t(()=>[Z]),item:t(({props:i,item:V})=>[a("div",E(i,{class:"d-flex select_slot",style:{"justify-content":"space-between"}}),[o(v,null,{default:t(()=>[d(f(V.raw.name),1)]),_:2},1024),o(v,null,{default:t(()=>[d(f(V.raw.id),1)]),_:2},1024)],16)]),_:1},8,["items","modelValue","disabled","custom-filter"]),o(n,{class:"position-absolute"},{default:t(()=>[d("mdi-account-cowboy-hat")]),_:1})])])]),_:1}),o(y,{cols:"12",sm:"6",md:"4",lg:"3",class:"py-0"},{default:t(()=>[a("div",ee,[te,a("div",oe,[o(T,{"item-title":"name","item-value":"id",items:l(x).content,transition:"slide-y-transition",variant:"outlined",disabled:r.loading,"hide-details":"",modelValue:l(e).granaryId,"onUpdate:modelValue":s[2]||(s[2]=i=>l(e).granaryId=i),placeholder:"اختر الصومعة"},null,8,["items","disabled","modelValue"]),o(n,{class:"position-absolute"},{default:t(()=>[d("mdi-store-24-hour")]),_:1})])])]),_:1}),o(y,{cols:"12",sm:"6",md:"4",lg:"3",class:"py-0"},{default:t(()=>[a("div",ae,[le,a("div",ne,[o(T,{"return-object":"",items:l(u).content,"item-title":"name","item-value":"id",name:"productId",id:"productId",modelValue:l(e).productId,"onUpdate:modelValue":[s[3]||(s[3]=i=>l(e).productId=i),s[4]||(s[4]=i=>l(e).productTypeId=null)],variant:"outlined",placeholder:"اختر المنتج","hide-details":""},null,8,["items","modelValue"]),o(n,{class:"position-absolute"},{default:t(()=>[d("mdi-basket")]),_:1})])])]),_:1}),o(y,{cols:"12",sm:"6",md:"4",lg:"3",class:"py-0"},{default:t(()=>[a("div",se,[ie,a("div",de,[o(T,{"return-object":"",items:l(I),"item-title":"productType.name","item-value":"id",variant:"outlined",name:"productTypeId",id:"productTypeId","no-data-text":"لايوجد بيانات",modelValue:l(e).productTypeId,"onUpdate:modelValue":s[5]||(s[5]=i=>l(e).productTypeId=i),"hide-details":"",placeholder:"اختر الفرز"},null,8,["items","modelValue"]),o(n,{class:"position-absolute"},{default:t(()=>[d("mdi-sitemap ")]),_:1})])])]),_:1}),o(y,{cols:"12",sm:"6",md:"4",lg:"3",class:"py-0"},{default:t(()=>[a("div",re,[ce,a("div",ue,[S(a("input",{type:"date",name:"creationFromDate",disabled:r.loading,id:"creationFromDate","onUpdate:modelValue":s[6]||(s[6]=i=>l(e).creationFromDate=i),style:{"padding-right":"0 !important"}},null,8,pe),[[$,l(e).creationFromDate]]),o(n,{class:"position-absolute"},{default:t(()=>[d("mdi-calendar")]),_:1})])])]),_:1}),o(y,{cols:"12",sm:"6",md:"4",lg:"3",class:"py-0"},{default:t(()=>[a("div",me,[_e,a("div",ve,[S(a("input",{type:"date",name:"creationToDate",id:"creationToDate",disabled:r.loading,"onUpdate:modelValue":s[7]||(s[7]=i=>l(e).creationToDate=i),style:{"padding-right":"0 !important"}},null,8,fe),[[$,l(e).creationToDate]]),o(n,{class:"position-absolute"},{default:t(()=>[d("mdi-calendar")]),_:1})])])]),_:1}),o(y,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-1",style:{display:"flex","align-items":"flex-end"}},{default:t(()=>[o(j,{color:"blue",width:"100",height:"40",elevation:"0",onClick:h,class:"font-weight-bold",disabled:r.loading},{default:t(()=>[d("بحث")]),_:1},8,["disabled"])]),_:1})]),_:1})])}}},be=ge;const De={class:"dashboard_banners_listing"},ye={class:"page_toolbar d-flex align-center justify-space-between"},Ie={class:"toolbar_btns"},he=a("span",{class:"d-none"},null,-1),Te=a("div",null,"لايوجد بيانات",-1),Fe={__name:"Invoices",props:["invoices","loading","suppliers","granaries"],emits:["regetItems","filterData"],setup(r,{emit:g}){const m=w(1),_=w(1e4),D=w([{title:"رقم",key:"index"},{title:"التاريخ",key:"invoiceDate"},{title:"الصومعة",key:"granary.name"},{title:"المورد",key:"supplier.name"},{title:"المستند",key:"documentNumber"},{title:"رقم السيارة",key:"carNumber"},{title:"منتج / فرز",key:"productDetails"},{title:"قبل الخصم",key:"totalInvoicePrice"},{title:"بعد الخصم",key:"totalInvoicePriceAfterDiscount"}]),x=[{title:"الرئيسية",disabled:!1,to:{name:"index"}},{title:"التقارير",to:{name:"reports"}},{title:"تقرير التوريدات",disabled:!0}];return G(()=>m.value,b=>{g("regetItems",{page:b,limit:_.value})}),G(()=>_.value,b=>{g("regetItems",{page:m.value,limit:b})}),(b,u)=>{const e=p("v-icon"),I=p("v-btn"),h=p("v-breadcrumbs"),c=be,s=p("v-col"),v=p("v-row"),T=p("v-container");return M(),k("div",De,[a("div",ye,[a("div",Ie,[o(I,{width:"20",size:"sm",elevation:"0",color:"transparent"},{default:t(()=>[o(e,{color:"white",size:"25"},{default:t(()=>[d("mdi-printer")]),_:1})]),_:1})]),o(h,{items:x,dir:"rtl",class:"pa-0 mb"},{title:t(({item:n})=>[d(f(n.title.toUpperCase()),1)]),_:1})]),o(T,{class:"page_container",fluid:""},{default:t(()=>[r.invoices?(M(),z(v,{key:0,class:"px-4 mt-1"},{default:t(()=>[o(s,{cols:"12",class:"px-0"},{default:t(()=>[o(c,{class:"mb-7",loading:r.loading,onFilterData:u[0]||(u[0]=n=>g("filterData",n))},null,8,["loading"])]),_:1}),o(s,{cols:"12",class:"section_container dashboard_table pa-0"},{default:t(()=>[o(l(H),{headers:l(D),items:r.invoices.content,loading:r.loading,"items-per-page":l(_),"onUpdate:itemsPerPage":u[1]||(u[1]=n=>U(_)?_.value=n:null),page:l(m),"onUpdate:page":u[2]||(u[2]=n=>U(m)?m.value=n:null),"items-length":r.invoices.totalElements?r.invoices.totalElements:0,"no-data-text":"لايوجد بيانات","show-current-page":"",id:"invoices_report_table"},{bottom:t(()=>[he]),loading:t(()=>[o(l(J),{type:"table-row@4"})]),"item.index":t(({item:n})=>[d(f(n.index+1),1)]),"item.invoiceDate":t(({item:n})=>[a("p",null,f(l(Y)(n.selectable.date).format("DD/MM/YYYY")),1)]),"item.productDetails":t(({item:n})=>[d(f(n.selectable.product.name)+" / "+f(n.selectable.productType.name),1)]),"item.totalInvoicePrice":t(({item:n})=>[d(f(n.selectable.totalPrice.toLocaleString()),1)]),"item.totalInvoicePriceAfterDiscount":t(({item:n})=>[d(f(n.selectable.totalAfterDiscount.toLocaleString()),1)]),"no-data":t(()=>[Te]),_:1},8,["headers","items","loading","items-per-page","page","items-length"])]),_:1})]),_:1})):A("",!0)]),_:1})])}}},we=Fe,xe={class:"dashboard_tests_page mb-10"},Ge={__name:"index",setup(r){const g=K(),m=R(),_=N(),{invoices:D}=F(g),{granaries:x}=F(_),{suppliers:b}=F(m),u=w(!1),e=w({supplierId:null,granaryId:null,creationFromDate:null,creationToDate:null,FromDate:null,ToDate:null}),I=async(h,c,s)=>{u.value=!0,e.value=s||{supplierId:null,granaryId:null,creationFromDate:null,creationToDate:null,FromDate:null,ToDate:null},await g.doGetInvoices(h-1,c,e.value),u.value=!1};return C(()=>{D.value=[],m.doGetSuppliers(0,1e4),_.doGetGranaries(0,1e4)}),(h,c)=>{const s=we;return M(),k("div",xe,[o(s,{invoices:l(D),loading:l(u),granaries:l(x).content,suppliers:l(b).content,onRegetItems:c[0]||(c[0]=v=>I(v.page,v.limit)),onFilterData:c[1]||(c[1]=v=>I(1,1e3,v))},null,8,["invoices","loading","granaries","suppliers"])])}}};export{Ge as default};
