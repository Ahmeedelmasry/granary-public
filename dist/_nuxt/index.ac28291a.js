import{r as c,z as S,o as B,f as i,k as y,l as C,q as o,s as e,v as h,t as V,A as H,m as l,B as L,C as t,D as F,E as J,F as k,G as U,H as O,I as D,J as K}from"./entry.9ac21750.js";import{p as R}from"./types.f63a2a21.js";import{c as Q,r as W,u as q}from"./index.7c7e0372.js";import{V as X,a as Y}from"./VSkeletonLoader.f41b8ad8.js";const Z={class:"update_banner"},ee={class:"field_container"},te=l("label",{for:"typeName"},"اسم الفرز",-1),oe={class:"input_parent position-relative"},ne={key:0,class:"err_msg"},ae={class:"actions text-center"},se={__name:"Update",props:["openPopup","toUpdate"],emits:["closePopup","regetData"],setup(u,{emit:v}){const p=u,f=R(),m=c({name:null}),d=c(!1),g=c(!1),r=c({name:{required:Q.withMessage("هذا الحقل مطلوب",W)}});S(()=>d.value,w=>{w||setTimeout(()=>{v("closePopup")},200)});let n=q(r,m);const z=async()=>{p.toUpdate&&(r.value.image={},n=q(r,m)),await n.value.$validate()&&(g.value=!0,p.toUpdate?await f.doUpdateType({id:p.toUpdate.selectable.id,name:m.value.name})&&(v("regetData"),d.value=!1):await f.doAddProductType({name:m.value.name})&&(v("regetData"),d.value=!1),g.value=!1)};return B(()=>{d.value=p.openPopup,p.toUpdate&&(m.value.name=p.toUpdate.selectable.name)}),(w,b)=>{const x=i("v-card-title"),a=i("v-icon"),$=i("v-col"),T=i("v-row"),I=i("v-container"),P=i("v-btn"),M=i("v-form"),N=i("v-card"),E=i("v-dialog");return y(),C("div",Z,[o(E,{modelValue:t(d),"onUpdate:modelValue":b[2]||(b[2]=_=>U(d)?d.value=_:null),width:"800",persistent:""},{default:e(()=>[o(N,null,{default:e(()=>[o(x,{class:"mb-0 text-center bg-grey-lighten-3 main_title font-weight-bold",style:{"font-size":"22px"}},{default:e(()=>[h(V(u.toUpdate?"تعديل الفرز":"اضافة فرز جديد"),1)]),_:1}),o(M,{class:"pa-5",onSubmit:H(z,["prevent"])},{default:e(()=>[o(I,null,{default:e(()=>[o(T,{dir:"rtl"},{default:e(()=>[o($,{cols:"12"},{default:e(()=>[l("div",ee,[te,l("div",oe,[L(l("input",{type:"text","onUpdate:modelValue":b[0]||(b[0]=_=>t(m).name=_),placeholder:"اسم الفرز",name:"typeName",id:"typeName",class:F(t(n).$errors.find(_=>_.$property=="name")?"err_field":"")},null,2),[[J,t(m).name]]),o(a,{class:"position-absolute"},{default:e(()=>[h("mdi-rename-outline")]),_:1})])]),t(n).$errors.find(_=>_.$property=="name")?(y(),C("span",ne,V(t(n).$errors.find(_=>_.$property=="name").$message),1)):k("",!0)]),_:1})]),_:1})]),_:1}),l("div",ae,[o(P,{color:"red",class:"mr-3",onClick:b[1]||(b[1]=_=>d.value=!1),disabled:t(g)},{default:e(()=>[h("الغاء")]),_:1},8,["disabled"]),o(P,{color:"green",type:"submit",loading:t(g)},{default:e(()=>[h("حفظ")]),_:1},8,["loading"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"])])}}},le=se,ie={class:"dashboard_banners_listing"},de={class:"page_toolbar d-flex align-center justify-space-between"},re={class:"toolbar_btns"},ce=l("h1",{dir:"rtl",class:"my-2 hide_till_print"},"درجات الفرز",-1),pe=l("tr",null,[l("th",null,"رقم"),l("th",null,"اسم الفرز"),l("th",{class:"hide_on_print"},"اجراء")],-1),ue={class:"hide_on_print"},me=l("div",null,"لايوجد بيانات",-1),_e=l("span",{class:"d-none"},null,-1),ve={key:0,class:"text-center pt-2 d-flex justify-space-between hide_on_print",style:{width:"60%"}},fe={class:"ps-5 d-flex align-center"},ge=l("label",{for:"",class:"mb-2 d-block text-end ms-3 mt-1",style:{"font-size":"12px"}},"النتائج لكل صفحة",-1),be={__name:"Listing",props:["productTypes","loading"],emits:["regetItems"],setup(u,{emit:v}){const p=c(!1),f=c(!1),m=c(!1),d=c(null),g=c(null),r=c(1),n=c(10),z=c([{title:"رقم",key:"index"},{title:"اسم الفرز",key:"name"},{title:"اجراء",key:"actions"}]),w=[{title:"الرئيسية",disabled:!1,to:{name:"index"}},{title:"درجات الفرز",disabled:!0}],b=c({id:"printable",popTitle:" -",extraCss:"https://cdn.bootcdn.net/ajax/libs/animate.css/4.1.1/animate.compat.css, https://cdn.bootcdn.net/ajax/libs/hover.css/2.3.1/css/hover-min.css",extraHead:'<meta http-equiv="Content-Language"content="zh-cn"/>'});return S(()=>r.value,x=>{v("regetItems",{page:x,limit:n.value})}),S(()=>n.value,x=>{v("regetItems",{page:r.value,limit:x})}),(x,a)=>{const $=i("v-icon"),T=i("v-btn"),I=i("v-breadcrumbs"),P=i("v-select"),M=i("v-pagination"),N=i("v-col"),E=i("v-row"),_=i("v-container"),j=le,A=O("print");return y(),C("div",ie,[l("div",de,[l("div",re,[o(T,{onClick:a[0]||(a[0]=s=>p.value=!0),width:"20",size:"sm",elevation:"0",color:"transparent"},{default:e(()=>[o($,{color:"white",size:"25"},{default:e(()=>[h("mdi-plus-circle")]),_:1})]),_:1}),L((y(),D(T,{width:"20",size:"sm",elevation:"0",color:"transparent",class:"ms-3"},{default:e(()=>[o($,{color:"white",size:"25"},{default:e(()=>[h("mdi-printer")]),_:1})]),_:1})),[[A,t(b)]])]),o(I,{items:w,dir:"rtl",class:"pa-0 mb"},{title:e(({item:s})=>[h(V(s.title.toUpperCase()),1)]),_:1})]),o(_,{class:"page_container",fluid:""},{default:e(()=>[u.productTypes?(y(),D(E,{key:0,class:"px-4"},{default:e(()=>[o(N,{cols:"12",class:"section_container dashboard_table pa-0",id:"printable"},{default:e(()=>[ce,o(t(X),{headers:t(z),items:u.productTypes.content,loading:u.loading,"items-per-page":t(n),"onUpdate:itemsPerPage":a[1]||(a[1]=s=>U(n)?n.value=s:null),page:t(r),"onUpdate:page":a[2]||(a[2]=s=>U(r)?r.value=s:null),"items-length":u.productTypes.totalElements?u.productTypes.totalElements:0,"no-data-text":"لايوجد بيانات","show-current-page":""},{loading:e(()=>[o(t(Y),{type:"table-row@6"})]),headers:e(()=>[pe]),item:e(({item:s})=>[l("tr",null,[l("td",null,V(s.index+1),1),l("td",null,V(s.selectable.name),1),l("td",ue,[o($,{color:"blue",style:{cursor:"pointer"},onClick:G=>(d.value=s,f.value=!0)},{default:e(()=>[h("mdi-square-edit-outline")]),_:2},1032,["onClick"]),o(T,{elevation:"0",color:"transparent",loading:s.selectable.loading,ripple:!1},{default:e(()=>[o($,{color:"red",style:{cursor:"pointer"},class:"ml-2",size:"23",onClick:G=>(g.value=s.selectable,m.value=!0)},{default:e(()=>[h("mdi-lock")]),_:2},1032,["onClick"])]),_:2},1032,["loading"])])])]),"no-data":e(()=>[me]),bottom:e(()=>[_e]),_:1},8,["headers","items","loading","items-per-page","page","items-length"]),u.loading?k("",!0):(y(),C("div",ve,[l("div",fe,[o(P,{modelValue:t(n),"onUpdate:modelValue":a[3]||(a[3]=s=>U(n)?n.value=s:null),items:[10,50,100,500],variant:"outlined","hide-details":""},null,8,["modelValue"]),ge]),o(M,{modelValue:t(r),"onUpdate:modelValue":a[4]||(a[4]=s=>U(r)?r.value=s:null),length:u.productTypes.totalElements?Math.ceil(u.productTypes.totalElements/t(n)):1},null,8,["modelValue","length"])]))]),_:1})]),_:1})):k("",!0)]),_:1}),t(f)?(y(),D(j,{key:0,openPopup:t(f),onClosePopup:a[5]||(a[5]=s=>(f.value=!1,d.value=null)),toUpdate:t(d),onRegetData:a[6]||(a[6]=s=>(r.value=1,v("regetItems",{page:1,limit:t(n)})))},null,8,["openPopup","toUpdate"])):k("",!0),t(p)?(y(),D(j,{key:1,openPopup:t(p),onClosePopup:a[7]||(a[7]=s=>p.value=!1),onRegetData:a[8]||(a[8]=s=>v("regetItems",{page:1,limit:t(n)}))},null,8,["openPopup"])):k("",!0)])}}},ye=be,he={class:"dashboard_tests_page mb-10"},ke={__name:"index",setup(u){const v=R(),{productTypes:p}=K(v),f=c(!0),m=async(d,g)=>{f.value=!0,await v.doGetProductTypes(d-1,g),f.value=!1};return B(()=>{m(1,10)}),(d,g)=>{const r=ye;return y(),C("div",he,[o(r,{productTypes:t(p),loading:t(f),onRegetItems:g[0]||(g[0]=n=>m(n.page,n.limit))},null,8,["productTypes","loading"])])}}};export{ke as default};
