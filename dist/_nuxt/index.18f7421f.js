import{J as T,r as c,R as A,o as q,f as m,k as y,l as M,q as o,s as a,m as e,C as t,M as H,v as f,t as u,D as O,F as R,B as j,E as U,z,S as J,H as K,I as P,G as B}from"./entry.9ac21750.js";import{g as E}from"./granary.552dc71b.js";import{s as N}from"./supplier.33ca5a1d.js";import{h as Y}from"./moment.a9aaa855.js";import{c as Q,r as W,u as X}from"./index.7c7e0372.js";import{V as Z,a as ee}from"./VSkeletonLoader.f41b8ad8.js";import{s as te}from"./supplier_payments.2ec53398.js";const le={class:"supplierPaymentReportFilter"},ae={class:"field_container"},se=e("label",{for:"supplierId"},"اختر المورد",-1),ne={class:"input_parent position-relative"},oe=e("div",{class:"d-flex ps-4 pe-2 py-2",style:{"justify-content":"space-between"}},[e("span",null,"الاسم"),e("span",null,"الكود")],-1),ie={class:"field_container"},re=e("label",{for:"granaryId"},"اختر الصومعة",-1),de={class:"input_parent position-relative"},ue={key:0,class:"err_msg"},ce={class:"field_container",dir:"rtl"},pe=e("label",{for:"FromDate"},"من",-1),me={class:"input_parent position-relative"},_e=["disabled"],ge={class:"field_container",dir:"rtl"},ve=e("label",{for:"ToDate"},"الي",-1),De={class:"input_parent position-relative"},fe=["disabled"],be={__name:"Filter",props:["loading"],emits:["filterData"],setup(s,{emit:D}){const p=E(),_=N(),{granaries:b}=T(p),{suppliers:$}=T(_),n=c({supplierId:null,granaryId:null,creationFromDate:null,creationToDate:null,FromDate:null,ToDate:null}),h=c({granaryId:{required:Q.withMessage("هذا الحقل مطلوب",W)}});let g=X(h,n);const I=async()=>{if(await g.value.$validate()){const l={supplierId:n.value.supplierId,granaryId:n.value.granaryId,creationFromDate:n.value.creationFromDate?Y(n.value.creationFromDate).format("DD/MM/YYYY"):null,creationToDate:n.value.creationToDate?Y(Date.now(n.value.creationToDate)+864e5).format("DD/MM/YYYY"):null,FromDate:n.value.FromDate?Y(n.value.FromDate).format("DD/MM/YYYY"):null,ToDate:n.value.ToDate?Y(n.value.ToDate).format("DD/MM/YYYY"):null};w(l),D("filterData",l)}},w=A("supplierSelect");return q(()=>{p.doGetGranaries(0,1e4),_.doGetSuppliers(0,1e4)}),(v,l)=>{const r=m("v-list-item"),k=m("v-autocomplete"),F=m("v-icon"),S=m("v-col"),G=m("v-btn"),C=m("v-row");return y(),M("div",le,[o(C,{dir:"rtl",class:"pt-0"},{default:a(()=>[o(S,{cols:"12",sm:"6",md:"4",lg:"3"},{default:a(()=>[e("div",ae,[se,e("div",ne,[o(k,{"item-title":"name","item-value":"id",items:t($).content,transition:"slide-y-transition",variant:"outlined","hide-details":"",modelValue:t(n).supplierId,"onUpdate:modelValue":l[0]||(l[0]=i=>t(n).supplierId=i),"auto-select-first":"","return-object":"",disabled:s.loading,placeholder:"اختر المورد",name:"supplier",id:"supplier","custom-filter":(i,x,V)=>V.title.toString().includes(x)||V.value.toString().includes(x)},{"prepend-item":a(()=>[oe]),item:a(({props:i,item:x})=>[e("div",H(i,{class:"d-flex select_slot",style:{"justify-content":"space-between"}}),[o(r,null,{default:a(()=>[f(u(x.raw.name),1)]),_:2},1024),o(r,null,{default:a(()=>[f(u(x.raw.id),1)]),_:2},1024)],16)]),_:1},8,["items","modelValue","disabled","custom-filter"]),o(F,{class:"position-absolute"},{default:a(()=>[f("mdi-account-cowboy-hat")]),_:1})])])]),_:1}),o(S,{cols:"12",sm:"6",md:"4",lg:"3"},{default:a(()=>[e("div",ie,[re,e("div",de,[o(k,{"item-title":"name","item-value":"id","return-object":"",items:t(b).content,transition:"slide-y-transition",variant:"outlined",disabled:s.loading,"hide-details":"",modelValue:t(n).granaryId,"onUpdate:modelValue":l[1]||(l[1]=i=>t(n).granaryId=i),placeholder:"اختر الصومعة",class:O(t(g).$errors.find(i=>i.$property=="granaryId")?"err_field":"")},null,8,["items","disabled","modelValue","class"]),o(F,{class:"position-absolute"},{default:a(()=>[f("mdi-store-24-hour")]),_:1})]),t(g).$errors.find(i=>i.$property=="granaryId")?(y(),M("span",ue,u(t(g).$errors.find(i=>i.$property=="granaryId").$message),1)):R("",!0)])]),_:1}),o(S,{cols:"12",sm:"6",md:"4",lg:"3"},{default:a(()=>[e("div",ce,[pe,e("div",me,[j(e("input",{type:"date",name:"FromDate",id:"FromDate",disabled:s.loading,"onUpdate:modelValue":l[2]||(l[2]=i=>t(n).FromDate=i),style:{"padding-right":"0 !important"}},null,8,_e),[[U,t(n).FromDate]]),o(F,{class:"position-absolute"},{default:a(()=>[f("mdi-calendar")]),_:1})])])]),_:1}),o(S,{cols:"12",sm:"6",md:"4",lg:"3"},{default:a(()=>[e("div",ge,[ve,e("div",De,[j(e("input",{type:"date",name:"ToDate","onUpdate:modelValue":l[3]||(l[3]=i=>t(n).ToDate=i),disabled:s.loading,id:"ToDate",style:{"padding-right":"0 !important"}},null,8,fe),[[U,t(n).ToDate]]),o(F,{class:"position-absolute"},{default:a(()=>[f("mdi-calendar")]),_:1})])])]),_:1}),o(S,{cols:"12",sm:"6",md:"4",lg:"3",style:{display:"flex","align-items":"flex-end"},class:"pt-0"},{default:a(()=>[o(G,{color:"blue",width:"100",height:"40",elevation:"0",onClick:I,class:"font-weight-bold",style:{"margin-bottom":"2px"},disabled:s.loading},{default:a(()=>[f("بحث")]),_:1},8,["disabled"])]),_:1})]),_:1})])}}},he=be;const ye={class:"dues_supplier_payments"},Se={class:"w-100 text-right",dir:"rtl",style:{border:"1px solid rgb(179, 179, 179)","border-radius":"12px",padding:"13px",background:"#f0f0f0ba"},id:"not_styled_print"},xe=e("th",{class:"pb-2"},"اسم المورد:",-1),$e={class:"pb-2"},Ie=e("th",{class:"pb-2"},"اسم الصومعة:",-1),we={class:"pb-2"},Fe=e("th",{class:"pb-2"},"تاريخ من",-1),Ye={class:"pb-2"},Te=e("th",{class:"pb-2"},"تاريخ الي",-1),Me={__name:"SupplierData",props:["supplierDues","selectedSupplier","selectedGranary","fromDate","toDate"],setup(s){return(D,p)=>(y(),M("div",ye,[e("table",Se,[e("tbody",null,[e("tr",null,[xe,e("td",$e,u(s.selectedSupplier?s.selectedSupplier.name:"الكل"),1),Ie,e("td",we,u(s.selectedGranary?s.selectedGranary.name:"الكل"),1)]),e("tr",null,[Fe,e("td",Ye,u(s.fromDate?t(Y)(s.fromDate).format("DD-MM-YYYY"):"الكل"),1),Te,e("td",null,u(s.toDate?t(Y)(s.toDate).format("DD-MM-YYYY"):"الكل"),1)])])])]))}},ke=Me,Ce={class:"dashboard_banners_listing"},Ve={class:"page_toolbar d-flex align-center justify-space-between"},Ge={class:"toolbar_btns"},Pe=e("h1",{dir:"rtl",class:"my-2 hide_till_print"},"تقرير مستحقات الموردين",-1),Re=e("tr",null,[e("th",null,"كود"),e("th",null,"اسم المورد"),e("th",null,"اجمالي الكمية"),e("th",null,"نقدية مستحقة"),e("th",null,"نقدية مسددة"),e("th",null,"نقدية متبقية"),e("th",{class:"hide_till_print_table"},"التوقيع")],-1),je=e("span",{class:"d-none"},null,-1),Ue=e("td",{class:"hide_till_print_table"},[e("div",{class:"field_container"},[e("div",{class:"input_parent"},[e("input",{type:"text",style:{width:"130px"}})])])],-1),ze=e("div",null,"لايوجد بيانات",-1),Be={__name:"SupplierDues",props:["supplierDues","loading","suppliers","granaries"],emits:["regetItems","filterData","loading"],setup(s,{emit:D}){const p=c(1),_=c(1e3),b=c(!1),$=c(null),n=c(null),h=c(null),g=c(null),I=c([{title:"رقم",key:"supplier.id"},{title:"كمية التوريد",key:"supplier.name"},{title:"قيمة التوريد",key:"totalAmountSupplied"},{title:"قيمة التوريد",key:"totalPriceSupplied"},{title:"قيمة التوريد",key:"totalCashPaied"},{title:"تاريخ التوريد",key:"totalCashRemaining"}]),w=[{title:"الرئيسية",disabled:!1,to:{name:"index"}},{title:"التقارير",to:{name:"reports"}},{title:"تقرير مستحقات الموردين",disabled:!0}],v=c({id:"printable",popTitle:" -",extraCss:"https://cdn.bootcdn.net/ajax/libs/animate.css/4.1.1/animate.compat.css, https://cdn.bootcdn.net/ajax/libs/hover.css/2.3.1/css/hover-min.css",extraHead:'<meta http-equiv="Content-Language"content="zh-cn"/>',beforeOpenCallback(l){b.value=!0},closeCallback(l){b.value=!1}});return z(()=>p.value,l=>{D("regetItems",{page:l,limit:_.value})}),z(()=>_.value,l=>{D("regetItems",{page:p.value,limit:l})}),J("supplierSelect",l=>{console.log(l),$.value=l.FromDate,n.value=l.ToDate,h.value=l.supplierId,g.value=l.granaryId}),(l,r)=>{const k=m("v-icon"),F=m("v-btn"),S=m("v-breadcrumbs"),G=he,C=m("v-col"),i=ke,x=m("v-row"),V=m("v-container"),L=K("print");return y(),M("div",Ce,[e("div",Ve,[e("div",Ge,[j((y(),P(F,{width:"20",size:"sm",elevation:"0",color:"transparent",loading:t(b)},{default:a(()=>[o(k,{color:"white",size:"25"},{default:a(()=>[f("mdi-printer")]),_:1})]),_:1},8,["loading"])),[[L,t(v)]])]),o(S,{items:w,dir:"rtl",class:"pa-0 mb"},{title:a(({item:d})=>[f(u(d.title.toUpperCase()),1)]),_:1})]),o(V,{class:"page_container",fluid:""},{default:a(()=>[s.supplierDues?(y(),P(x,{key:0,class:"px-4 mt-1"},{default:a(()=>[o(C,{cols:"12",class:"px-0 py-0"},{default:a(()=>[o(G,{class:"mb-7",loading:s.loading,onFilterData:r[0]||(r[0]=d=>D("filterData",d))},null,8,["loading"])]),_:1}),o(C,{cols:"12",class:"section_container dashboard_table pa-0",id:"printable"},{default:a(()=>[Pe,s.supplierDues.length&&!s.loading?(y(),P(i,{key:0,supplierDues:s.supplierDues,selectedSupplier:t(h),selectedGranary:t(g),fromDate:t($),toDate:t(n),class:"mb-5"},null,8,["supplierDues","selectedSupplier","selectedGranary","fromDate","toDate"])):R("",!0),o(t(Z),{headers:t(I),items:s.supplierDues.length?s.supplierDues:[],loading:s.loading,"items-per-page":t(_),"onUpdate:itemsPerPage":r[1]||(r[1]=d=>B(_)?_.value=d:null),page:t(p),"onUpdate:page":r[2]||(r[2]=d=>B(p)?p.value=d:null),"items-length":s.supplierDues.totalElements?s.supplierDues.totalElements:0,"no-data-text":"لايوجد بيانات","show-current-page":""},{headers:a(()=>[Re]),bottom:a(()=>[je]),loading:a(()=>[o(t(ee),{type:"table-row@6"})]),item:a(({item:d})=>[e("tr",null,[e("td",null,u(d.selectable.supplier.id),1),e("td",null,u(d.selectable.supplier.name),1),e("td",null,u(d.selectable.totalAmountSupplied),1),e("td",null,u(d.selectable.totalPriceSupplied),1),e("td",null,u(d.selectable.totalCashPaied),1),e("td",null,u(d.selectable.totalCashRemaining),1),Ue])]),"no-data":a(()=>[ze]),_:1},8,["headers","items","loading","items-per-page","page","items-length"])]),_:1})]),_:1})):R("",!0)]),_:1})])}}},qe=Be,Ee={class:"dashboard_tests_page mb-10"},Qe={__name:"index",setup(s){const D=te(),p=N(),_=E(),{supplierDues:b}=T(D),{granaries:$}=T(_),{suppliers:n}=T(p),h=c(!1),g=c({supplierId:null,granaryId:null,creationFromDate:null,creationToDate:null,FromDate:null,ToDate:null}),I=async(w,v,l)=>{h.value=!0,g.value=l||{supplierId:null,granaryId:null,creationFromDate:null,creationToDate:null,FromDate:null,ToDate:null},await D.doGetSupplierDues(w-1,v,g.value),h.value=!1};return q(()=>{b.value=[],p.doGetSuppliers(0,1e4),_.doGetGranaries(0,1e4)}),(w,v)=>{const l=qe;return y(),M("div",Ee,[o(l,{supplierDues:t(b),loading:t(h),granaries:t($).content,suppliers:t(n).content,onRegetItems:v[0]||(v[0]=r=>I(r.page,r.limit)),onFilterData:v[1]||(v[1]=r=>I(1,1e3,r))},null,8,["supplierDues","loading","granaries","suppliers"])])}}};export{Qe as default};
