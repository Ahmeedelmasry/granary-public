import{J as H,r as m,z as A,o as J,f as p,k as _,l as $,q as s,s as l,v as g,t as v,A as Q,m as n,B as C,C as t,D as M,E as L,F as h,I as q,K as W,L as X,N as Y,G as S,H as Z}from"./entry.9ac21750.js";import{g as K}from"./granary.552dc71b.js";import{c as ee}from"./clients.efb1b936.js";import{c as P,r as z,u as F}from"./index.7c7e0372.js";import{V as te,a as ne}from"./VSkeletonLoader.f41b8ad8.js";const oe={class:"update_banner"},ae={class:"field_container"},le=n("label",{for:"typeName"},"اسم الصومعة",-1),se={class:"input_parent position-relative"},ie={key:0,class:"err_msg"},re={class:"field_container"},de=n("label",{for:"typeName"},"المحافظة",-1),ce={class:"input_parent position-relative"},ue={key:0,class:"err_msg"},pe={class:"field_container"},_e=n("label",{for:"typeName"},"المدينة",-1),me={class:"input_parent position-relative"},ve={key:0,class:"err_msg"},ge={class:"field_container"},fe=n("label",{for:"typeName"},"المنطقة / الحي",-1),ye={class:"input_parent position-relative"},be={key:0,class:"err_msg"},$e={class:"field_container"},he=n("label",{for:"typeName"},"اسم العميل",-1),xe={class:"input_parent position-relative"},ke=n("option",{value:""},"قم باختيار العميل",-1),we=["value"],Ue={key:0,class:"err_msg"},Ve={class:"actions text-center mt-5"},Ne={__name:"Update",props:["openPopup","toUpdate"],emits:["closePopup","regetData"],setup(f,{emit:y}){const u=f,b=K(),U=ee(),{clients:x}=H(U),a=m({name:null,governorate:null,city:null,region:null,client:null}),r=m(!1),d=m(!1),D=m({name:{required:P.withMessage("هذا الحقل مطلوب",z)},governorate:{required:P.withMessage("هذا الحقل مطلوب",z)},city:{required:P.withMessage("هذا الحقل مطلوب",z)},region:{required:P.withMessage("هذا الحقل مطلوب",z)},client:{required:P.withMessage("هذا الحقل مطلوب",z)}});A(()=>r.value,w=>{w||setTimeout(()=>{y("closePopup")},200)});let c=F(D,a);const E=async()=>{u.toUpdate&&(D.value.image={},c=F(D,a)),await c.value.$validate()&&(d.value=!0,u.toUpdate?await b.doUpdateGranary({id:u.toUpdate.selectable.id,name:a.value.name,governorate:a.value.governorate,city:a.value.city,region:a.value.region,client:{id:a.value.client}})&&(y("regetData"),r.value=!1):await b.doAddGranary({name:a.value.name,governorate:a.value.governorate,city:a.value.city,region:a.value.region,client:{id:a.value.client}})&&(y("regetData"),r.value=!1),d.value=!1)};return J(()=>{U.doGetClients(),r.value=u.openPopup,u.toUpdate&&(a.value.name=u.toUpdate.selectable.name,a.value.governorate=u.toUpdate.selectable.governorate,a.value.city=u.toUpdate.selectable.city,a.value.region=u.toUpdate.selectable.region,a.value.client=u.toUpdate.selectable.client.id)}),(w,o)=>{const N=p("v-card-title"),k=p("v-icon"),V=p("v-col"),T=p("v-row"),j=p("v-container"),G=p("v-btn"),B=p("v-form"),R=p("v-card"),I=p("v-dialog");return _(),$("div",oe,[s(I,{modelValue:t(r),"onUpdate:modelValue":o[6]||(o[6]=e=>S(r)?r.value=e:null),width:"800",persistent:""},{default:l(()=>[s(R,null,{default:l(()=>[s(N,{class:"mb-0 text-center bg-grey-lighten-3 main_title font-safe-bold",style:{"font-size":"22px"}},{default:l(()=>[g(v(f.toUpdate?"تعديل صومعة":"اضافة صومعة جديدة"),1)]),_:1}),s(B,{class:"pa-5",onSubmit:Q(E,["prevent"])},{default:l(()=>[s(j,null,{default:l(()=>[s(T,{dir:"rtl"},{default:l(()=>[s(V,{cols:"12",md:"6"},{default:l(()=>[n("div",ae,[le,n("div",se,[C(n("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=e=>t(a).name=e),placeholder:"اسم الصومعة",name:"typeName",id:"typeName",class:M(t(c).$errors.find(e=>e.$property=="name")?"err_field":"")},null,2),[[L,t(a).name]]),s(k,{class:"position-absolute"},{default:l(()=>[g("mdi-rename-outline")]),_:1})])]),t(c).$errors.find(e=>e.$property=="name")?(_(),$("span",ie,v(t(c).$errors.find(e=>e.$property=="name").$message),1)):h("",!0)]),_:1}),s(V,{cols:"12",md:"6"},{default:l(()=>[n("div",re,[de,n("div",ce,[C(n("input",{type:"text","onUpdate:modelValue":o[1]||(o[1]=e=>t(a).governorate=e),placeholder:"المحافظة",name:"typeName",id:"typeName",class:M(t(c).$errors.find(e=>e.$property=="governorate")?"err_field":"")},null,2),[[L,t(a).governorate]]),s(k,{class:"position-absolute"},{default:l(()=>[g("mdi-city-variant-outline ")]),_:1})])]),t(c).$errors.find(e=>e.$property=="governorate")?(_(),$("span",ue,v(t(c).$errors.find(e=>e.$property=="governorate").$message),1)):h("",!0)]),_:1}),s(V,{cols:"12",md:"6"},{default:l(()=>[n("div",pe,[_e,n("div",me,[C(n("input",{type:"text","onUpdate:modelValue":o[2]||(o[2]=e=>t(a).city=e),placeholder:"المدينة",name:"typeName",id:"typeName",class:M(t(c).$errors.find(e=>e.$property=="city")?"err_field":"")},null,2),[[L,t(a).city]]),s(k,{class:"position-absolute"},{default:l(()=>[g("mdi-city-variant-outline ")]),_:1})])]),t(c).$errors.find(e=>e.$property=="city")?(_(),$("span",ve,v(t(c).$errors.find(e=>e.$property=="city").$message),1)):h("",!0)]),_:1}),s(V,{cols:"12",md:"6"},{default:l(()=>[n("div",ge,[fe,n("div",ye,[C(n("input",{type:"text","onUpdate:modelValue":o[3]||(o[3]=e=>t(a).region=e),placeholder:"المنطقة / الحي",name:"typeName",id:"typeName",class:M(t(c).$errors.find(e=>e.$property=="region")?"err_field":"")},null,2),[[L,t(a).region]]),s(k,{class:"position-absolute"},{default:l(()=>[g("mdi-city-variant-outline ")]),_:1})])]),t(c).$errors.find(e=>e.$property=="region")?(_(),$("span",be,v(t(c).$errors.find(e=>e.$property=="region").$message),1)):h("",!0)]),_:1}),t(x).content?(_(),q(V,{key:0,cols:"12",md:"6"},{default:l(()=>[n("div",$e,[he,n("div",xe,[C(n("select",{name:"",id:"",class:M(["w-100",t(c).$errors.find(e=>e.$property=="client")?"err_field":""]),"onUpdate:modelValue":o[4]||(o[4]=e=>t(a).client=e)},[ke,(_(!0),$(W,null,X(t(x).content,e=>(_(),$("option",{value:e.id,key:e.id},v(e.name),9,we))),128))],2),[[Y,t(a).client]]),s(k,{class:"position-absolute"},{default:l(()=>[g("mdi-account-cowboy-hat-outline ")]),_:1})])]),t(c).$errors.find(e=>e.$property=="client")?(_(),$("span",Ue,v(t(c).$errors.find(e=>e.$property=="client").$message),1)):h("",!0)]),_:1})):h("",!0)]),_:1})]),_:1}),n("div",Ve,[s(G,{color:"red",class:"mr-3",onClick:o[5]||(o[5]=e=>r.value=!1),disabled:t(d)},{default:l(()=>[g("الغاء")]),_:1},8,["disabled"]),s(G,{color:"green",type:"submit",loading:t(d)},{default:l(()=>[g("حفظ")]),_:1},8,["loading"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"])])}}},Ce=Ne,De={class:"dashboard_banners_listing"},Me={class:"page_toolbar d-flex align-center justify-space-between"},Pe={class:"toolbar_btns"},ze=n("h1",{dir:"rtl",class:"my-2 hide_till_print"},"الصوامع",-1),qe=n("tr",null,[n("th",null,"رقم"),n("th",null,"اسم الصومعة"),n("th",null,"العميل"),n("th",null,"المحافظة"),n("th",null,"المدينة"),n("th",null,"المنطقة / الحي"),n("th",{class:"hide_on_print"},"اجراء")],-1),Se={class:"hide_on_print"},Ge=n("div",null,"لايوجد بيانات",-1),Ie=n("span",{class:"d-none"},null,-1),Le={key:0,class:"text-center pt-2 d-flex justify-space-between hide_on_print",style:{width:"60%"}},Ee={class:"ps-5 d-flex align-center"},Te=n("label",{for:"",class:"mb-2 d-block text-end ms-3 mt-1",style:{"font-size":"12px"}},"النتائج لكل صفحة",-1),je={__name:"Listing",props:["granaries","loading"],emits:["regetItems"],setup(f,{emit:y}){const u=m(!1),b=m(!1),U=m(!1),x=m(null),a=m(null),r=m(1),d=m(10),D=m([{title:"رقم",key:"index"},{title:"اسم الصومعة",key:"name"},{title:"العميل",key:"client.name"},{title:"المحافظة",key:"governorate"},{title:"المدينة",key:"city"},{title:"المنطقة / الحي",key:"region"},{title:"اجراء",key:"actions"}]),c=[{title:"الرئيسية",disabled:!1,to:{name:"index"}},{title:"الصوامع",disabled:!0}],E=m({id:"printable",popTitle:" -",extraCss:"https://cdn.bootcdn.net/ajax/libs/animate.css/4.1.1/animate.compat.css, https://cdn.bootcdn.net/ajax/libs/hover.css/2.3.1/css/hover-min.css",extraHead:'<meta http-equiv="Content-Language"content="zh-cn"/>'});return A(()=>r.value,w=>{y("regetItems",{page:w,limit:d.value})}),A(()=>d.value,w=>{y("regetItems",{page:r.value,limit:w})}),(w,o)=>{const N=p("v-icon"),k=p("v-btn"),V=p("v-breadcrumbs"),T=p("v-select"),j=p("v-pagination"),G=p("v-col"),B=p("v-row"),R=p("v-container"),I=Ce,e=Z("print");return _(),$("div",De,[n("div",Me,[n("div",Pe,[s(k,{onClick:o[0]||(o[0]=i=>u.value=!0),width:"20",size:"sm",elevation:"0",color:"transparent"},{default:l(()=>[s(N,{color:"white",size:"25"},{default:l(()=>[g("mdi-plus-circle")]),_:1})]),_:1}),C((_(),q(k,{width:"20",size:"sm",elevation:"0",color:"transparent",class:"ms-3"},{default:l(()=>[s(N,{color:"white",size:"25"},{default:l(()=>[g("mdi-printer")]),_:1})]),_:1})),[[e,t(E)]])]),s(V,{items:c,dir:"rtl",class:"pa-0 mb"},{title:l(({item:i})=>[g(v(i.title.toUpperCase()),1)]),_:1})]),s(R,{class:"page_container",fluid:""},{default:l(()=>[f.granaries?(_(),q(B,{key:0,class:"px-4"},{default:l(()=>[s(G,{cols:"12",class:"section_container dashboard_table pa-0",id:"printable"},{default:l(()=>[ze,s(t(te),{headers:t(D),items:f.granaries.content,loading:f.loading,"items-per-page":t(d),"onUpdate:itemsPerPage":o[1]||(o[1]=i=>S(d)?d.value=i:null),page:t(r),"onUpdate:page":o[2]||(o[2]=i=>S(r)?r.value=i:null),"items-length":f.granaries.totalElements?f.granaries.totalElements:0,"no-data-text":"لايوجد بيانات","show-current-page":""},{loading:l(()=>[s(t(ne),{type:"table-row@6"})]),headers:l(()=>[qe]),item:l(({item:i})=>[n("tr",null,[n("td",null,v(i.index+1),1),n("td",null,v(i.selectable.name),1),n("td",null,v(i.selectable.client.name),1),n("td",null,v(i.selectable.governorate),1),n("td",null,v(i.selectable.city),1),n("td",null,v(i.selectable.region),1),n("td",Se,[s(N,{color:"blue",style:{cursor:"pointer"},onClick:O=>(x.value=i,b.value=!0)},{default:l(()=>[g("mdi-square-edit-outline")]),_:2},1032,["onClick"]),s(k,{elevation:"0",color:"transparent",loading:i.selectable.loading,ripple:!1},{default:l(()=>[s(N,{color:"red",style:{cursor:"pointer"},class:"ml-2",size:"23",onClick:O=>(a.value=i.selectable,U.value=!0)},{default:l(()=>[g("mdi-lock")]),_:2},1032,["onClick"])]),_:2},1032,["loading"])])])]),"no-data":l(()=>[Ge]),bottom:l(()=>[Ie]),_:1},8,["headers","items","loading","items-per-page","page","items-length"]),f.loading?h("",!0):(_(),$("div",Le,[n("div",Ee,[s(T,{modelValue:t(d),"onUpdate:modelValue":o[3]||(o[3]=i=>S(d)?d.value=i:null),items:[10,50,100,500],variant:"outlined","hide-details":""},null,8,["modelValue"]),Te]),s(j,{modelValue:t(r),"onUpdate:modelValue":o[4]||(o[4]=i=>S(r)?r.value=i:null),length:f.granaries.totalElements?Math.ceil(f.granaries.totalElements/t(d)):1},null,8,["modelValue","length"])]))]),_:1})]),_:1})):h("",!0)]),_:1}),t(b)?(_(),q(I,{key:0,openPopup:t(b),onClosePopup:o[5]||(o[5]=i=>(b.value=!1,x.value=null)),toUpdate:t(x),onRegetData:o[6]||(o[6]=i=>(r.value=1,y("regetItems",{page:1,limit:t(d)})))},null,8,["openPopup","toUpdate"])):h("",!0),t(u)?(_(),q(I,{key:1,openPopup:t(u),onClosePopup:o[7]||(o[7]=i=>u.value=!1),onRegetData:o[8]||(o[8]=i=>y("regetItems",{page:1,limit:t(d)}))},null,8,["openPopup"])):h("",!0)])}}},Be=je,Re={class:"dashboard_tests_page mb-10"},Oe={__name:"index",setup(f){const y=K(),{granaries:u}=H(y),b=m(!0),U=async(x,a)=>{b.value=!0,await y.doGetGranaries(x-1,a),b.value=!1};return J(()=>{U(1,10)}),(x,a)=>{const r=Be;return _(),$("div",Re,[s(r,{granaries:t(u),loading:t(b),onRegetItems:a[0]||(a[0]=d=>U(d.page,d.limit))},null,8,["granaries","loading"])])}}};export{Oe as default};
