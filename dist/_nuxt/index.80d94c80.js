import{J as T,r as y,o as U,f as p,k as w,l as S,q as a,s as t,m as e,C as n,M as B,v as f,t as x,B as k,E as P,z as $,H as z,I as C,G,F as E}from"./entry.9ac21750.js";import{g as j}from"./granary.552dc71b.js";import{s as R}from"./supplier.33ca5a1d.js";import{h as F}from"./moment.a9aaa855.js";import{V as N,a as q}from"./VSkeletonLoader.f41b8ad8.js";import{s as H}from"./supplier_payments.2ec53398.js";const L={class:"supplierPaymentReportFilter"},J={class:"field_container"},O=e("label",{for:"supplierId"},"اختر المورد",-1),A={class:"input_parent position-relative"},K=e("div",{class:"d-flex ps-4 pe-2 py-2",style:{"justify-content":"space-between"}},[e("span",null,"الاسم"),e("span",null,"الكود")],-1),Q={class:"field_container"},W=e("label",{for:"granaryId"},"اختر الصومعة",-1),X={class:"input_parent position-relative"},Z={class:"field_container"},ee=e("label",{for:"creationFromDate"},"من",-1),te={class:"input_parent position-relative"},ae=["disabled"],le={class:"field_container"},ne=e("label",{for:"creationToDate"},"الي",-1),oe={class:"input_parent position-relative"},se=["disabled"],ie={__name:"Filter",props:["loading"],emits:["filterData"],setup(s,{emit:D}){const u=j(),m=R(),{granaries:h}=T(u),{suppliers:Y}=T(m),l=y({supplierId:null,granaryId:null,creationFromDate:null,creationToDate:null,FromDate:null,ToDate:null}),g=()=>{const d={supplierId:l.value.supplierId,granaryId:l.value.granaryId,creationFromDate:l.value.creationFromDate?F(l.value.creationFromDate).format("DD/MM/YYYY"):null,creationToDate:l.value.creationToDate?F(Date.now(l.value.creationToDate)+864e5).format("DD/MM/YYYY"):null,FromDate:l.value.FromDate?F(l.value.FromDate).format("DD/MM/YYYY"):null,ToDate:l.value.ToDate?F(l.value.ToDate).format("DD/MM/YYYY"):null};D("filterData",d)};return U(()=>{u.doGetGranaries(0,1e4),m.doGetSuppliers(0,1e4)}),(d,i)=>{const b=p("v-list-item"),_=p("v-autocomplete"),v=p("v-icon"),r=p("v-col"),I=p("v-btn"),M=p("v-row");return w(),S("div",L,[a(M,{dir:"rtl",class:"pt-0"},{default:t(()=>[a(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pt-0"},{default:t(()=>[e("div",J,[O,e("div",A,[a(_,{"item-title":"name","item-value":"id",items:n(Y).content,transition:"slide-y-transition",variant:"outlined","hide-details":"",modelValue:n(l).supplierId,"onUpdate:modelValue":i[0]||(i[0]=c=>n(l).supplierId=c),disabled:s.loading,"auto-select-first":"",placeholder:"اختر المورد",name:"supplier",id:"supplier","custom-filter":(c,o,V)=>V.title.toString().includes(o)||V.value.toString().includes(o)},{"prepend-item":t(()=>[K]),item:t(({props:c,item:o})=>[e("div",B(c,{class:"d-flex select_slot",style:{"justify-content":"space-between"}}),[a(b,null,{default:t(()=>[f(x(o.raw.name),1)]),_:2},1024),a(b,null,{default:t(()=>[f(x(o.raw.id),1)]),_:2},1024)],16)]),_:1},8,["items","modelValue","disabled","custom-filter"]),a(v,{class:"position-absolute"},{default:t(()=>[f("mdi-account-cowboy-hat")]),_:1})])])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"py-0"},{default:t(()=>[e("div",Q,[W,e("div",X,[a(_,{"item-title":"name","item-value":"id",items:n(h).content,transition:"slide-y-transition",variant:"outlined",disabled:s.loading,"hide-details":"",modelValue:n(l).granaryId,"onUpdate:modelValue":i[1]||(i[1]=c=>n(l).granaryId=c),placeholder:"اختر الصومعة"},null,8,["items","disabled","modelValue"]),a(v,{class:"position-absolute"},{default:t(()=>[f("mdi-store-24-hour")]),_:1})])])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"py-0"},{default:t(()=>[e("div",Z,[ee,e("div",te,[k(e("input",{type:"date",name:"creationFromDate",disabled:s.loading,id:"creationFromDate","onUpdate:modelValue":i[2]||(i[2]=c=>n(l).creationFromDate=c),style:{"padding-right":"0 !important"}},null,8,ae),[[P,n(l).creationFromDate]]),a(v,{class:"position-absolute"},{default:t(()=>[f("mdi-calendar")]),_:1})])])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"py-0"},{default:t(()=>[e("div",le,[ne,e("div",oe,[k(e("input",{type:"date",name:"creationToDate",id:"creationToDate",disabled:s.loading,"onUpdate:modelValue":i[3]||(i[3]=c=>n(l).creationToDate=c),style:{"padding-right":"0 !important"}},null,8,se),[[P,n(l).creationToDate]]),a(v,{class:"position-absolute"},{default:t(()=>[f("mdi-calendar")]),_:1})])])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-1",style:{display:"flex","align-items":"flex-end"}},{default:t(()=>[a(I,{color:"blue",width:"100",height:"40",elevation:"0",onClick:g,class:"font-weight-bold",disabled:s.loading},{default:t(()=>[f("بحث")]),_:1},8,["disabled"])]),_:1})]),_:1})])}}},re=ie,de={class:"dashboard_banners_listing"},ce={class:"page_toolbar d-flex align-center justify-space-between"},pe={class:"toolbar_btns"},ue=e("h1",{dir:"rtl",class:"my-2 hide_till_print"},"تقرير سدادات الموردين",-1),me=e("tr",null,[e("th",null,"كود"),e("th",null,"المورد"),e("th",null,"الصومعة"),e("th",null,"قيمة السداد"),e("th",null,"المبلغ المتبقي"),e("th",null,"تاريخ السداد"),e("th",null,"تاريخ الانشاء"),e("th",null,"ملاحظات")],-1),_e=e("span",{class:"d-none"},null,-1),ve=e("div",null,"لايوجد بيانات",-1),ge={__name:"SupplierPayments",props:["payments","loading","suppliers","granaries"],emits:["regetItems","filterData"],setup(s,{emit:D}){const u=y(1),m=y(1e3),h=y([{title:"رقم",key:"index"},{title:"الصومعة",key:"granary.name"},{title:"المورد",key:"supplier.name"},{title:"قيمة السداد",key:"paid"},{title:"المبلغ المتبقي",key:"remain"},{title:"تاريخ السداد",key:"date"},{title:"تاريخ الانشاء",key:"creationDate"},{title:"ملاحظات",key:"notes"}]),Y=[{title:"الرئيسية",disabled:!1,to:{name:"index"}},{title:"التقارير",to:{name:"reports"}},{title:"تقرير سدادات الموردين",disabled:!0}],l=y({id:"printable",popTitle:" -",extraCss:"https://cdn.bootcdn.net/ajax/libs/animate.css/4.1.1/animate.compat.css, https://cdn.bootcdn.net/ajax/libs/hover.css/2.3.1/css/hover-min.css",extraHead:'<meta http-equiv="Content-Language"content="zh-cn"/>'});return $(()=>u.value,g=>{D("regetItems",{page:g,limit:m.value})}),$(()=>m.value,g=>{D("regetItems",{page:u.value,limit:g})}),(g,d)=>{const i=p("v-icon"),b=p("v-btn"),_=p("v-breadcrumbs"),v=re,r=p("v-col"),I=p("v-row"),M=p("v-container"),c=z("print");return w(),S("div",de,[e("div",ce,[e("div",pe,[k((w(),C(b,{width:"20",size:"sm",elevation:"0",color:"transparent"},{default:t(()=>[a(i,{color:"white",size:"25"},{default:t(()=>[f("mdi-printer")]),_:1})]),_:1})),[[c,n(l)]])]),a(_,{items:Y,dir:"rtl",class:"pa-0 mb"},{title:t(({item:o})=>[f(x(o.title.toUpperCase()),1)]),_:1})]),a(M,{class:"page_container",fluid:""},{default:t(()=>[s.payments?(w(),C(I,{key:0,class:"px-4 mt-1"},{default:t(()=>[a(r,{cols:"12",class:"px-0"},{default:t(()=>[a(v,{class:"mb-7",loading:s.loading,onFilterData:d[0]||(d[0]=o=>D("filterData",o))},null,8,["loading"])]),_:1}),a(r,{cols:"12",class:"section_container dashboard_table pa-0",id:"printable"},{default:t(()=>[ue,a(n(N),{headers:n(h),items:s.payments.content,loading:s.loading,"items-per-page":n(m),"onUpdate:itemsPerPage":d[1]||(d[1]=o=>G(m)?m.value=o:null),page:n(u),"onUpdate:page":d[2]||(d[2]=o=>G(u)?u.value=o:null),"items-length":s.payments.totalElements?s.payments.totalElements:0,"no-data-text":"لايوجد بيانات","show-current-page":""},{headers:t(()=>[me]),bottom:t(()=>[_e]),loading:t(()=>[a(n(q),{type:"table-row@4"})]),"item.index":t(({item:o})=>[f(x(o.selectable.supplier.id),1)]),"item.date":t(({item:o})=>[e("p",null,x(n(F)(o.selectable.date).format("DD/MM/YYYY")),1)]),"item.creationDate":t(({item:o})=>[e("p",null,x(n(F)(o.selectable.creationDate).format("DD/MM/YYYY")),1)]),"no-data":t(()=>[ve]),_:1},8,["headers","items","loading","items-per-page","page","items-length"])]),_:1})]),_:1})):E("",!0)]),_:1})])}}},fe=ge,De={class:"dashboard_tests_page mb-10"},Te={__name:"index",setup(s){const D=H(),u=R(),m=j(),{payments:h}=T(D),{granaries:Y}=T(m),{suppliers:l}=T(u),g=y(!1),d=y({supplierId:null,granaryId:null,creationFromDate:null,creationToDate:null,FromDate:null,ToDate:null}),i=async(b,_,v)=>{g.value=!0,d.value=v||{supplierId:null,granaryId:null,creationFromDate:null,creationToDate:null,FromDate:null,ToDate:null},await D.doGetPayments(b-1,_,d.value),g.value=!1};return U(()=>{h.value=[],u.doGetSuppliers(0,1e4),m.doGetGranaries(0,1e4)}),(b,_)=>{const v=fe;return w(),S("div",De,[a(v,{payments:n(h),loading:n(g),granaries:n(Y).content,suppliers:n(l).content,onRegetItems:_[0]||(_[0]=r=>i(r.page,r.limit)),onFilterData:_[1]||(_[1]=r=>i(1,1e3,r))},null,8,["payments","loading","granaries","suppliers"])])}}};export{Te as default};
