import{r as _,z as R,o as O,f as d,k as b,l as k,q as s,s as n,v as $,t as x,A as X,m as t,B as P,C as e,D as T,E as j,F as U,G as D,H as Y,I as N,J as Z}from"./entry.9ac21750.js";import{s as K}from"./supplier.33ca5a1d.js";import{c as y,r as B,n as G,m as H,a as F,u as J}from"./index.7c7e0372.js";import{V as ee,a as te}from"./VSkeletonLoader.f41b8ad8.js";const ne={class:"update_banner"},oe={class:"field_container"},se=t("label",{for:"typeName"},"اسم المورد",-1),ae={class:"input_parent position-relative"},le={key:0,class:"err_msg"},ie={class:"field_container"},re=t("label",{for:"typeName"},"رقم الهاتف",-1),de={class:"input_parent position-relative"},pe={key:0,class:"err_msg"},ue={class:"field_container"},ce=t("label",{for:"typeName"},"رقم البطاقة",-1),me={class:"input_parent position-relative"},_e={key:0,class:"err_msg"},ve={class:"actions text-center"},fe={__name:"Update",props:["openPopup","toUpdate"],emits:["closePopup","regetData"],setup(v,{emit:f}){const p=v,g=K(),l=_({name:null,phone:null,nationalid:null}),u=_(!1),h=_(!1),c=_({name:{required:y.withMessage("هذا الحقل مطلوب",B)},phone:{required:y.withMessage("هذا الحقل مطلوب",B),numeric:y.withMessage("هذا الحقل يقبل ارقام فقط",G),minLength:y.withMessage("هذا الحقل يجب ان يتكون من 11 رقم",H(11)),maxLength:y.withMessage("هذا الحقل يجب ان يتكون من 11 رقم",F(11))},nationalid:{required:y.withMessage("هذا الحقل مطلوب",B),numeric:y.withMessage("هذا الحقل يقبل ارقام فقط",G),minLength:y.withMessage("هذا الحقل يجب ان يتكون من 14 رقم",H(14)),maxLength:y.withMessage("هذا الحقل يجب ان يتكون من 14 رقم",F(14))}});R(()=>u.value,C=>{C||setTimeout(()=>{f("closePopup")},200)});let a=J(c,l);const z=async()=>{p.toUpdate&&(c.value.image={},a=J(c,l)),await a.value.$validate()&&(h.value=!0,p.toUpdate?await g.doUpdateSupplier({id:p.toUpdate.selectable.id,name:l.value.name,phone:l.value.phone,nationalid:l.value.nationalid,isLocked:!1})&&(f("regetData"),u.value=!1):await g.doAddSupplier({name:l.value.name,phone:l.value.phone,nationalid:l.value.nationalid,isLocked:!1})&&(f("regetData"),u.value=!1),h.value=!1)};return O(()=>{u.value=p.openPopup,p.toUpdate&&(l.value.name=p.toUpdate.selectable.name,l.value.phone=p.toUpdate.selectable.phone,l.value.nationalid=p.toUpdate.selectable.nationalid)}),(C,m)=>{const V=d("v-card-title"),i=d("v-icon"),w=d("v-col"),M=d("v-row"),S=d("v-container"),L=d("v-btn"),q=d("v-form"),I=d("v-card"),E=d("v-dialog");return b(),k("div",ne,[s(E,{modelValue:e(u),"onUpdate:modelValue":m[4]||(m[4]=o=>D(u)?u.value=o:null),width:"800",persistent:""},{default:n(()=>[s(I,null,{default:n(()=>[s(V,{class:"mb-0 text-center bg-grey-lighten-3 main_title font-weight-bold",style:{"font-size":"22px"}},{default:n(()=>[$(x(v.toUpdate?"تعديل مورد":"اضافة مورد"),1)]),_:1}),s(q,{class:"pa-5",onSubmit:X(z,["prevent"])},{default:n(()=>[s(S,null,{default:n(()=>[s(M,{dir:"rtl"},{default:n(()=>[s(w,{cols:"12",md:"6"},{default:n(()=>[t("div",oe,[se,t("div",ae,[P(t("input",{type:"text","onUpdate:modelValue":m[0]||(m[0]=o=>e(l).name=o),placeholder:"اسم المورد",name:"typeName",id:"typeName",class:T(e(a).$errors.find(o=>o.$property=="name")?"err_field":"")},null,2),[[j,e(l).name]]),s(i,{class:"position-absolute"},{default:n(()=>[$("mdi-rename-outline")]),_:1})])]),e(a).$errors.find(o=>o.$property=="name")?(b(),k("span",le,x(e(a).$errors.find(o=>o.$property=="name").$message),1)):U("",!0)]),_:1}),s(w,{cols:"12",md:"6"},{default:n(()=>[t("div",ie,[re,t("div",de,[P(t("input",{type:"text","onUpdate:modelValue":m[1]||(m[1]=o=>e(l).phone=o),placeholder:"رقم الهاتف",name:"phoneNum",id:"phoneNum",class:T(e(a).$errors.find(o=>o.$property=="phone")?"err_field":"")},null,2),[[j,e(l).phone]]),s(i,{class:"position-absolute"},{default:n(()=>[$("mdi-cellphone")]),_:1})])]),e(a).$errors.find(o=>o.$property=="phone")?(b(),k("span",pe,x(e(a).$errors.find(o=>o.$property=="phone").$message),1)):U("",!0)]),_:1}),s(w,{cols:"12",md:"6"},{default:n(()=>[t("div",ue,[ce,t("div",me,[P(t("input",{type:"text","onUpdate:modelValue":m[2]||(m[2]=o=>e(l).nationalid=o),placeholder:"رقم البطاقة",name:"phoneNum",id:"phoneNum",class:T(e(a).$errors.find(o=>o.$property=="nationalid")?"err_field":"")},null,2),[[j,e(l).nationalid]]),s(i,{class:"position-absolute",style:{top:"18px"}},{default:n(()=>[$("mdi-card-account-details")]),_:1})])]),e(a).$errors.find(o=>o.$property=="nationalid")?(b(),k("span",_e,x(e(a).$errors.find(o=>o.$property=="nationalid").$message),1)):U("",!0)]),_:1})]),_:1})]),_:1}),t("div",ve,[s(L,{color:"red",class:"mr-3",onClick:m[3]||(m[3]=o=>u.value=!1),disabled:e(h)},{default:n(()=>[$("الغاء")]),_:1},8,["disabled"]),s(L,{color:"green",type:"submit",loading:e(h)},{default:n(()=>[$("حفظ")]),_:1},8,["loading"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"])])}}},ge=fe,he={class:"dashboard_banners_listing"},be={class:"page_toolbar d-flex align-center justify-space-between"},$e={class:"toolbar_btns"},ye=t("h1",{dir:"rtl",class:"my-2 hide_till_print"},"الموردين",-1),xe=t("tr",null,[t("th",null,"كود"),t("th",null,"اسم المورد"),t("th",null,"رقم الهاتف"),t("th",null,"رقم البطاقة"),t("th",{class:"hide_on_print"},"اجراء")],-1),we={class:"hide_on_print"},ke=t("div",null,"لايوجد بيانات",-1),Ue=t("span",{class:"d-none"},null,-1),Ve={key:0,class:"text-center pt-2 d-flex justify-space-between hide_on_print",style:{width:"60%"}},Ce={class:"ps-5 d-flex align-center"},Me=t("label",{for:"",class:"mb-2 d-block text-end ms-3 mt-1",style:{"font-size":"12px"}},"النتائج لكل صفحة",-1),De={__name:"Listing",props:["suppliers","loading"],emits:["regetItems"],setup(v,{emit:f}){const p=_(!1),g=_(!1),l=_(!1),u=_(null),h=_(null),c=_(1),a=_(10),z=[{title:"الرئيسية",disabled:!1,to:{name:"index"}},{title:"المودرين",disabled:!0}],C=_([{title:"رقم",key:"index",width:"10px"},{title:"اسم المورد",key:"name"},{title:"رقم الهاتف",key:"phone"},{title:"رقم البطاقة",key:"nationalid"},{title:"اجراء",key:"actions"}]),m=_({id:"printable",popTitle:" -",extraCss:"https://cdn.bootcdn.net/ajax/libs/animate.css/4.1.1/animate.compat.css, https://cdn.bootcdn.net/ajax/libs/hover.css/2.3.1/css/hover-min.css",extraHead:'<meta http-equiv="Content-Language"content="zh-cn"/>'});return R(()=>c.value,V=>{f("regetItems",{page:V,limit:a.value})}),R(()=>a.value,V=>{f("regetItems",{page:c.value,limit:V})}),(V,i)=>{const w=d("v-icon"),M=d("v-btn"),S=d("v-breadcrumbs"),L=d("v-select"),q=d("v-pagination"),I=d("v-col"),E=d("v-row"),o=d("v-container"),A=ge,Q=Y("print");return b(),k("div",he,[t("div",be,[t("div",$e,[s(M,{onClick:i[0]||(i[0]=r=>p.value=!0),width:"20",size:"sm",elevation:"0",color:"transparent"},{default:n(()=>[s(w,{color:"white",size:"25"},{default:n(()=>[$("mdi-plus-circle")]),_:1})]),_:1}),P((b(),N(M,{width:"20",size:"sm",elevation:"0",color:"transparent",class:"ms-3"},{default:n(()=>[s(w,{color:"white",size:"25"},{default:n(()=>[$("mdi-printer")]),_:1})]),_:1})),[[Q,e(m)]])]),s(S,{items:z,dir:"rtl",class:"pa-0 mb"},{title:n(({item:r})=>[$(x(r.title.toUpperCase()),1)]),_:1})]),s(o,{class:"page_container",fluid:""},{default:n(()=>[v.suppliers?(b(),N(E,{key:0,class:"px-4"},{default:n(()=>[s(I,{cols:"12",class:"section_container dashboard_table pa-0",id:"printable"},{default:n(()=>[ye,s(e(ee),{headers:e(C),items:v.suppliers.content,loading:v.loading,"items-per-page":e(a),"onUpdate:itemsPerPage":i[1]||(i[1]=r=>D(a)?a.value=r:null),page:e(c),"onUpdate:page":i[2]||(i[2]=r=>D(c)?c.value=r:null),"items-length":v.suppliers.totalElements?v.suppliers.totalElements:0,"no-data-text":"لايوجد بيانات","show-current-page":""},{loading:n(()=>[s(e(te),{type:"table-row@6"})]),headers:n(()=>[xe]),item:n(({item:r})=>[t("tr",null,[t("td",null,x(r.selectable.id),1),t("td",null,x(r.selectable.name),1),t("td",null,x(r.selectable.phone),1),t("td",null,x(r.selectable.nationalid),1),t("td",we,[s(w,{color:"blue",style:{cursor:"pointer"},onClick:W=>(u.value=r,g.value=!0)},{default:n(()=>[$("mdi-square-edit-outline")]),_:2},1032,["onClick"]),s(M,{elevation:"0",color:"transparent",loading:r.selectable.loading,ripple:!1},{default:n(()=>[s(w,{color:"red",style:{cursor:"pointer"},class:"ml-2",size:"23",onClick:W=>(h.value=r.selectable,l.value=!0)},{default:n(()=>[$("mdi-lock")]),_:2},1032,["onClick"])]),_:2},1032,["loading"])])])]),"no-data":n(()=>[ke]),bottom:n(()=>[Ue]),_:1},8,["headers","items","loading","items-per-page","page","items-length"]),v.loading?U("",!0):(b(),k("div",Ve,[t("div",Ce,[s(L,{modelValue:e(a),"onUpdate:modelValue":i[3]||(i[3]=r=>D(a)?a.value=r:null),items:[10,50,100,500],variant:"outlined","hide-details":""},null,8,["modelValue"]),Me]),s(q,{modelValue:e(c),"onUpdate:modelValue":i[4]||(i[4]=r=>D(c)?c.value=r:null),length:v.suppliers.totalElements?Math.ceil(v.suppliers.totalElements/e(a)):1},null,8,["modelValue","length"])]))]),_:1})]),_:1})):U("",!0)]),_:1}),e(g)?(b(),N(A,{key:0,openPopup:e(g),onClosePopup:i[5]||(i[5]=r=>(g.value=!1,u.value=null)),toUpdate:e(u),onRegetData:i[6]||(i[6]=r=>(c.value=1,f("regetItems",{page:1,limit:e(a)})))},null,8,["openPopup","toUpdate"])):U("",!0),e(p)?(b(),N(A,{key:1,openPopup:e(p),onClosePopup:i[7]||(i[7]=r=>p.value=!1),onRegetData:i[8]||(i[8]=r=>f("regetItems",{page:1,limit:e(a)}))},null,8,["openPopup"])):U("",!0)])}}},Le=De,Ne={class:"dashboard_tests_page mb-10"},Ie={__name:"index",setup(v){const f=K(),{suppliers:p}=Z(f),g=_(!0),l=async(u,h)=>{g.value=!0,await f.doGetSuppliers(u-1,h),g.value=!1};return O(()=>{l(1,10)}),(u,h)=>{const c=Le;return b(),k("div",Ne,[s(c,{suppliers:e(p),loading:e(g),onRegetItems:h[0]||(h[0]=a=>l(a.page,a.limit))},null,8,["suppliers","loading"])])}}};export{Ie as default};
